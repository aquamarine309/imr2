(function(){var e={6735:function(){window.NotImplementedError=class extends Error{constructor(){super("The method is not implemented."),this.name="NotImplementedError"}},window.GlobalErrorHandler={handled:!1,cleanStart:!1,onerror(e){this.handled||(this.handled=!0,this.cleanStart?(this.stopGame(),this.crash(e)):requestAnimationFrame((()=>this.crash(e))))},stopGame(){function e(e,t){let r=e((()=>{}),9999);while(r--)t(r)}GameKeyboard.disable(),GameIntervals.stop(),e(setInterval,clearInterval),e(setTimeout,clearTimeout),e(requestAnimationFrame,cancelAnimationFrame)},crash(e){void 0!==window.GameUI&&GameUI.initialized&&Modal.message.show(`${e}<br>Check the console for more details`,{},3)}},window.onerror=(e,t)=>{t.endsWith(".js")&&GlobalErrorHandler.onerror(e)}},6558:function(e,t,r){r(4114),window.EventHub=class e{constructor(){this._handlers={}}on(e,t,r){let n=this._handlers[e];void 0===n&&(n=[],this._handlers[e]=n),n.push({fn:t,target:r})}offAll(e){for(const t of Object.keys(this._handlers))this._handlers[t]=this._handlers[t].filter((t=>t.target!==e))}dispatch(e,t){const r=this._handlers[e];if(void 0!==r)for(const n of r)n.fn(t)}static dispatch(t,...r){e.logic.dispatch(t,r),GameUI.dispatch(t,r)}static get stats(){function t(e){return Object.values(e._handlers).map((e=>e.length)).sum()}return`UI(UPDATE/Total): ${e.ui._handlers[GAME_EVENT.UPDATE].length}/${t(e.ui)}; Logic(Total): ${t(e.logic)}`}},EventHub.logic=new EventHub,EventHub.ui=new EventHub,window.GAME_EVENT={GAME_TICK_AFTER:"GAME_TICK_AFTER",UPDATE:"UPDATE",TAB_CHANGED:"TAB_CHANGED",ENTER_PRESSED:"ENTER_PRESSED"}},5555:function(e,t,r){r(4114),r(7642),r(8004),r(3853),r(5876),r(2475),r(5024),r(1698),Array.prototype.distinct=function(){return this.filter(((e,t,r)=>r.indexOf(e)===t))},Math.wrap=function(e,t,r){const n=r-t+1,i=(e-t)%n;return i<0?r+1+i:t+i},Math.clamp=function(e,t,r){return Math.clampMax(Math.clampMin(e,t),r)},Math.clampMin=function(e,t){return Math.max(e,t)},Math.clampMax=function(e,t){return Math.min(e,t)},Array.prototype.nextSiblingIndex=function(e){const t=this.indexOf(e);if(-1===t)throw"Current item is not in array";return t===this.length-1?0:t+1},Array.prototype.nextSibling=function(e){return this[this.nextSiblingIndex(e)]},Array.prototype.previousSiblingIndex=function(e){const t=this.indexOf(e);if(-1===t)throw"Current item is not in array";return 0===t?this.length-1:t-1},Array.prototype.previousSibling=function(e){return this[this.previousSiblingIndex(e)]},Decimal.sumReducer=function(e,t){return Decimal.add(e,t)},Decimal.prodReducer=function(e,t){return Decimal.mul(e,t)},Number.sumReducer=function(e,t){return e+t},Number.prodReducer=function(e,t){return e*t},Decimal.maxReducer=function(e,t){return Decimal.max(e,t)},Decimal.prototype.copyFrom=function(e){if(!(e instanceof Decimal)&&!(e instanceof DecimalCurrency))throw"Copy value is not Decimal or DecimalCurrency";this.mantissa=e.mantissa,this.exponent=e.exponent},window.copyToClipboard=function(){const e=document.createElement("textarea");return document.body.appendChild(e),e.style.position="absolute",e.style.left="-9999999px",e.setAttribute("readonly",""),function(t){try{return e.value=t,e.select(),document.execCommand("copy")}catch(r){return console.log(r),!1}}}(),window.safeCall=function(e){e&&e()},String.prototype.capitalize=function(){return this.toLowerCase().replace(/^\w/u,(e=>e.toUpperCase()))},String.prototype.splice=function(e,t,r){return this.slice(0,e)+r+this.slice(e+Math.abs(t))},Array.range=function(e,t){return[...Array(t).keys()].map((t=>t+e))},Array.repeat=function(e,t){return Array(t).fill(e)},Array.prototype.first=function(e){if(void 0===e)return this.length>0?this[0]:void 0;if("function"!==typeof e)throw"Predicate must be a function";for(let t=0;t<this.length;t++)if(!0===e(this[t]))return this[t];throw"Array doesn't contain a matching item"},Array.prototype.last=function(e){if(void 0===e)return this.length>0?this[this.length-1]:void 0;if("function"!==typeof e)throw"Predicate must be a function";for(let t=this.length-1;t>=0;t--)if(!0===e(this[t]))return this[t];throw"Array doesn't contain a matching item"},Array.prototype.mapToObject=function(e,t){if("function"!==typeof e||"function"!==typeof t)throw"keyFun and valueFun must be functions";const r={};for(let n=0;n<this.length;++n)r[e(this[n],n)]=t(this[n],n);return r},Array.prototype.sum=function(){return 0===this.length?0:this.reduce(Number.sumReducer)},Array.prototype.max=function(){return 0===this.length?0:this.reduce(((e,t)=>Math.max(e,t)))},Array.prototype.min=function(){return 0===this.length?0:this.reduce(((e,t)=>Math.min(e,t)))},Array.prototype.countWhere=function(e){let t=0;for(const r of this)e(r)&&++t;return t},Decimal.prototype.clampMaxExponent=function(e){return this.exponent>=e?Decimal.fromMantissaExponent_noNormalize(1,e):this},Number.prototype.toDecimal=function(){return new Decimal(this.valueOf())},Math.log4=Math.log(4),Array.prototype.randomElement=function(){return this[Math.floor(Math.random()*this.length)]},Decimal.prototype.valueOf=()=>{throw new Error("Implicit conversion from Decimal to number")},Decimal.prototype.copy=function(){return Decimal.fromDecimal(this)},Set.prototype.countWhere=function(e){let t=0;for(const r of this)e(r)&&++t;return t},Set.prototype.find=function(e){for(const t of this)if(e(t))return t},Set.prototype.some=function(e){for(const t of this)if(e(t))return!0;return!1},Set.prototype.every=function(e){for(const t of this)if(!e(t))return!1;return!0},Array.prototype.compact=function(){return this.filter((e=>void 0!==e&&null!==e))},Array.prototype.toBitmask=function(){return this.reduce(((e,t)=>e|1<<t),0)},Set.prototype.toBitmask=function(){let e=0;for(const t of this)e|=1<<t;return e},Array.fromBitmask=function(e){const t=[];let r=0;while(0!==e)1&e&&t.push(r),e>>=1,++r;return t},String.isWhiteSpace=function(e){return e&&!e.trim()}},8181:function(){function e(e,t){return 0===t?e.slice(-3):e.slice(-3*(t+1),-3*t)}function t(t){let r="";const n=Math.ceil(t.length/3);for(let i=n-1;i>=0;i--)r+=e(t,i),0!==i&&(r+=",");return r}function r(e){const r=e.split(".");return r[0]=r[0].replace(/\w+$/gu,t),r.join(".")}window.format=function e(t,n=4,i=12){const s=Decimal.fromValue_noAlloc(t);if(!s.isFinite())return"NaN";if(s.sign<0)return`-${e(s.neg(),n)}`;if(0===s.sign)return(0).toFixed(n);const a=s.log10().floor();if(n>1&&a.lt(-n)){const t=s.log10().ceil(),r=s.div(Decimal.pow10(t)),n=t.neg().clampMin(1).log10().gte(9),a=n?"":r.toFixed(4),o=e(t,0,i);return`${a}e${o}`}if(a.lt(i)){const e=a.toNumber(),t=e<=0?n:Math.max(n-e,0);return r(s.toFixed(t))}if(s.layer>=5){const t=s.layer,r=t<1e9?s.mag.toFixed(4):"",n=e(t,0);return`${r}F${n}`}const o=s.div(Decimal.pow10(a)),c=a.gt(1e9),u=c?"":o.toFixed(4),l=e(a,0,i);return`${u}e${l}`},window.formatX=function(e){return`Ã—${format(e)}`},window.formatPow=function(e){return`^${format(e)}`},window.formatPercents=function(e,t=4){const r=e instanceof Decimal?e:new Decimal(e);return`${format(r.times(100),t)}%`},window.formatMass=function(e){return`${format(e)} g`},window.formatInt=function(e){const t=e instanceof Decimal?e.toNumber():e;return t.toFixed(0)}},2632:function(e,t,r){"use strict";var n={};r.r(n),r.d(n,{BitPurchasableMechanicState:function(){return k},BitUpgradeState:function(){return v},Effect:function(){return m},Effects:function(){return h},GameMechanicState:function(){return y},PurchasableMechanicState:function(){return b},RebuyableMechanicState:function(){return _},SetPurchasableMechanicState:function(){return w}});var i={};r.r(i);var s={};r.r(s),r.d(s,{Autobuyer:function(){return Qn},Autobuyers:function(){return Zn},ConfirmationTypes:function(){return Vn},Currency:function(){return pe},DC:function(){return f},GameCache:function(){return Q},GameLoop:function(){return le},GameStorage:function(){return Nn},GameUI:function(){return Jr},MassUpgrade:function(){return ie},MassUpgradeSoftcap:function(){return se},Modal:function(){return In},Player:function(){return H},PlayerProgress:function(){return Hn},RageUpgrade:function(){return ce},RageUpgrades:function(){return ue},RankType:function(){return te},RankTypes:function(){return re},Scaling:function(){return K},Serializer:function(){return Wn},Tab:function(){return ve},Tabs:function(){return be},Tutorial:function(){return Fn},dilatedValue:function(){return j},scaleValue:function(){return z},softcap:function(){return Y},ui:function(){return Qr}});var a={};r.r(a),r.d(a,{init:function(){return ei}});var o=r(8416),c=r(1529),u=r(6513),l=r.n(u);const d=!1;window.Decimal=o.A,window.Vue=c.Ay,d&&l().init();r(8181);function p(e){return Object.keys(e).forEach((t=>{const r=e[t];"object"===typeof r&&p(r)})),Object.freeze(e)}window.SOFTCAP_TYPE={POWER:0,MULT:1,DILATION:2,LOG:3},window.SCALE_TYPE={POWER:0,EXP:1,DILATION:2,ALT_EXP:3};const f=p({D0_5:new Decimal("0.5"),D0_75:new Decimal("0.75"),D0_9:new Decimal("0.9"),D1_4:new Decimal("1.4"),D1_5:new Decimal("1.5"),D2_5:new Decimal("2.5"),D0:new Decimal("0"),D1:new Decimal("1"),D2:new Decimal("2"),D3:new Decimal("3"),D4:new Decimal("4"),D5:new Decimal("5"),D6:new Decimal("6"),D7:new Decimal("7"),D8:new Decimal("8"),D9:new Decimal("9"),D15:new Decimal("15"),D25:new Decimal("25"),D50:new Decimal("50"),D500:new Decimal("500"),E1:new Decimal("1e1"),E2:new Decimal("1e2"),E3:new Decimal("1e3"),E4:new Decimal("1e4"),E5:new Decimal("1e5"),E6:new Decimal("1e6"),E7:new Decimal("1e7"),E15:new Decimal("1e15"),E20:new Decimal("1e20"),E100:new Decimal("1e100")});window.SCALING_TYPE=["Super","Hyper","Ultra","Meta","Exotic","Supercritical","Instant","Mega"];r(6558),r(6735),r(5555);window.LinearCostScaling=class{constructor(e,t,r,n=Decimal.dNumberMax,i=!1){this._purchases=i?e.div(t).log10().div(Math.log10(r).add(1)).floor().min(n):e.mul(r.sub(1)).div(t).add(1).log10().div(r.log10()).floor().min(n),this._totalCostMultiplier=Decimal.pow(r,this._purchases),this._totalCost=i?t.mul(r.pow(this._purchases.sub(1))):t.mul(f.D1.minus(this._totalCostMultiplier)).div(f.D1.sub(r))}get purchases(){return this._purchases}get totalCostMultiplier(){return this._totalCostMultiplier}get totalCost(){return this._totalCost}},window.getLinearCost=function(e,t,r){return t.times(r.pow(e))},window.getLinearBulk=function(e,t,r){return e.div(t).clampMin(1).log(r).add(1).floor()};class m{constructor(e,t,r){if(void 0===e||this.isCustomEffect)return;const n=e=>"function"===typeof e,i=e=>"number"===typeof e,s=e=>e instanceof Decimal,a=e=>i(e)||s(e);if(!n(e)&&!a(e))throw new Error("Unknown effect value type.");const o=()=>({configurable:!1}),c=(e,t)=>{if(a(t))e.writable=!1,e.value=t;else{if(!n(t))throw new Error("Unknown getter type.");e.get=t}};if(void 0!==r){if(!n(r))throw new Error("Effect condition must be a function.");const e=o();e.get=r,Object.defineProperty(this,"isEffectConditionSatisfied",e)}const u=o();if(c(u,e),Object.defineProperty(this,"uncappedEffectValue",u),void 0!==t){const e=o();c(e,t),Object.defineProperty(this,"cap",e)}const l=o();c(l,e),a(t)?i(e)?l.get=()=>Math.min(e,this.cap):s(e)?l.get=()=>Decimal.min(e,this.cap):n(e)&&(l.configurable=!0,l.get=()=>{const t=e(),r=o();if(i(t))r.get=()=>Math.min(e(),this.cap);else{if(!s(t))throw new Error("Unknown effect value type.");r.get=()=>Decimal.min(e(),this.cap)}return Object.defineProperty(this,"effectValue",r),r.get()}):n(t)&&(i(e)?l.get=()=>{const t=this.cap;return void 0===t?e:Math.min(e,t)}:s(e)?l.get=()=>{const t=this.cap;return void 0===t?e:Decimal.min(e,t)}:n(e)&&(l.configurable=!0,l.get=()=>{const t=e(),r=o();if(i(t))r.get=()=>{const t=this.cap;return void 0===t?e():Math.min(e(),t)};else{if(!s(t))throw new Error("Unknown effect value type.");r.get=()=>{const t=this.cap;return void 0===t?e():Decimal.min(e(),t)}}return Object.defineProperty(this,"effectValue",r),r.get()})),Object.defineProperty(this,"effectValue",l)}get effectValue(){throw new Error("Effect is undefined.")}get uncappedEffectValue(){throw new Error("Effect is undefined.")}get cap(){throw new Error("Cap is undefined.")}get isEffectConditionSatisfied(){return!0}get isEffectActive(){return!0}get canBeApplied(){return this.isEffectActive&&this.isEffectConditionSatisfied}effectOrDefault(e){return this.canBeApplied?this.effectValue:e}applyEffect(e){this.canBeApplied&&e(this.effectValue)}get isCustomEffect(){return!1}}const h={sum(...e){let t=0;return g(e,(e=>t+=e)),t},product(...e){let t=1;return g(e,(e=>t*=e)),t},last(e,...t){let r=e,n=!1;const i=t.filter((e=>null!==e&&void 0!==e)).reverse(),s=e=>{r=e,n=!0};for(const a of i)if(a.applyEffect(s),n)break;return r},max(e,...t){let r=e;return g(t,(e=>r=Math.max(r,e))),r},min(e,...t){let r=e;return g(t,(e=>r=Math.min(r,e))),r}};function g(e,t){for(const r of e)null!==r&&void 0!==r&&r.applyEffect(t)}Decimal.prototype.plusEffectOf=function(e){let t=this;return e.applyEffect((e=>t=t.plus(e))),t},Decimal.prototype.plusEffectsOf=function(...e){let t=this;return g(e,(e=>t=t.plus(e))),t},Decimal.prototype.minusEffectOf=function(e){let t=this;return e.applyEffect((e=>t=t.minus(e))),t},Decimal.prototype.minusEffectsOf=function(...e){let t=this;return g(e,(e=>t=t.minus(e))),t},Decimal.prototype.timesEffectOf=function(e){let t=this;return e.applyEffect((e=>t=t.times(e))),t},Decimal.prototype.timesEffectsOf=function(...e){let t=this;return g(e,(e=>t=t.times(e))),t},Decimal.prototype.dividedByEffectOf=function(e){let t=this;return e.applyEffect((e=>t=t.dividedBy(e))),t},Decimal.prototype.dividedByEffectsOf=function(...e){let t=this;return g(e,(e=>t=t.dividedBy(e))),t},Decimal.prototype.powEffectOf=function(e){let t=this;return e.applyEffect((e=>t=t.pow(e))),t},Decimal.prototype.powEffectsOf=function(...e){let t=this;return g(e,(e=>t=t.pow(e))),t},Decimal.prototype.rootEffectOf=function(e){let t=this;return e.applyEffect((e=>t=t.root(e))),t},Decimal.prototype.rootEffectsOf=function(...e){let t=this;return g(e,(e=>t=t.root(e))),t};class y extends m{constructor(e){if(!e)throw new Error("Must specify config for GameMechanicState");if(super(e.effect,e.cap,e.effectCondition),this._config=e,void 0!==e.effects){this.effects={};for(const t in e.effects){const r=e.effects[t];let n;n="number"===typeof r||"function"===typeof r||r instanceof Decimal?new m(r):new m(r.effect,r.cap,r.effectCondition),Object.defineProperty(n,"isEffectActive",{configurable:!1,get:()=>this.isEffectActive}),this.effects[t]=n}}}get config(){return this._config}get id(){return this.config.id}registerEvents(e,t){if(void 0!==e)for(const r of e instanceof Array?e:[e])EventHub.logic.on(r,t,this)}static createAccessor(e){const t=mapGameData(e,(e=>new this(e))),r=e=>t[e];return r.index=t,r}}class v extends y{constructor(e){if(super(e),this.id<0||this.id>31)throw new Error(`Id ${this.id} out of bit range`)}get bits(){throw new NotImplementedError}set bits(e){throw new NotImplementedError}get isUnlocked(){return Boolean(this.bits&1<<this.id)}get canBeApplied(){return this.isUnlocked&&this.isEffectActive}get canBeUnlocked(){return!this.isUnlocked}onUnlock(){}unlock(){this.canBeUnlocked&&(this.bits|=1<<this.id,this.onUnlock())}}class b extends y{get currency(){throw new NotImplementedError}get isAffordable(){return this.currency.gte(this.cost)}get isAvailableForPurchase(){return!0}get isRebuyable(){return!1}get cost(){return this.config.cost}get isBought(){throw new NotImplementedError}set isBought(e){throw new NotImplementedError}get canBeBought(){return!this.isBought&&this.isAffordable&&this.isAvailableForPurchase}purchase(){return!!this.canBeBought&&(this.currency.subtract(this.cost),this.isBought=!0,this.onPurchased(),GameUI.update(),!0)}onPurchased(){}get isEffectActive(){return this.isBought}}class w extends b{get set(){throw new NotImplementedError}get isBought(){return this.set.has(this.id)}set isBought(e){e?this.set.add(this.id):this.set.delete(this.id)}}class k extends b{get bits(){throw new NotImplementedError}set bits(e){throw new NotImplementedError}get bitIndex(){throw new NotImplementedError}get isBought(){return 0!==(this.bits&1<<this.bitIndex)}set isBought(e){e?this.bits|=1<<this.bitIndex:this.bits&=~(1<<this.bitIndex)}}class _ extends y{get currency(){throw new NotImplementedError}get isAffordable(){return this.currency.gte(this.cost)}get cost(){return this.config.cost()}get isAvailableForPurchase(){return!0}get isCapped(){return!1}get isRebuyable(){return!0}get boughtAmount(){throw new NotImplementedError}set boughtAmount(e){throw new NotImplementedError}get isEffectActive(){return this.boughtAmount.gt(0)}get canBeBought(){return this.isAffordable&&this.isAvailableForPurchase&&!this.isCapped}purchase(){return!!this.canBeBought&&(this.currency.subtract(this.cost),this.boughtAmount=this.boughtAmount.add(1),this.onPurchased(),GameUI.update(),!0)}onPurchased(){}}const E={muscler:{id:"muscler",name:"Muscler",get currency(){return Currency.mass},get baseCost(){return f.E1},get costMult(){return f.D1_5.powEffectsOf(RankType.rank.unlocks.unlockBooster,RankType.tier.unlocks.upgradeLessCost)},get scaling(){return Scaling.massUpgrade},cost(e){const t=MassUpgrade.muscler.config;return getLinearCost(t.scaling.scaleEvery(e),t.baseCost,t.costMult)},bulk(e){const t=MassUpgrade.muscler.config;return t.scaling.scaleEvery(getLinearBulk(e,t.baseCost,t.costMult),!0)},get freeAmount(){return RageUpgrade(0).effectOrDefault(f.D0)},get isUnlocked(){return RankType.rank.unlocks.unlockMuscler.canBeApplied},get forceVisible(){return PlayerProgress.rageUnlocked()},get autoUnlocked(){return RageUpgrade(2).canBeApplied},get power(){let e=f.D1;return e=e.plusEffectOf(RankType.rank.unlocks.unlockStronger.effects.boost),e=e.timesEffectOf(MassUpgrade.booster),e},formatPower:e=>`+${formatMass(e)}`,effect(e,t){return e.times(t)},formatEffect:e=>`+${formatMass(e)} to mass gain`,upgClass:"i-mass-upgrade-1"},booster:{id:"booster",name:"Booster",get currency(){return Currency.mass},get baseCost(){return f.E2},get costMult(){return f.D4.powEffectsOf(RankType.rank.unlocks.unlockStronger.effects.cost,RankType.tier.unlocks.upgradeLessCost)},get scaling(){return Scaling.massUpgrade},cost(e){const t=MassUpgrade.booster.config;return getLinearCost(t.scaling.scaleEvery(e),t.baseCost,t.costMult)},bulk(e){const t=MassUpgrade.booster.config;return t.scaling.scaleEvery(getLinearBulk(e,t.baseCost,t.costMult),!0)},get freeAmount(){return RageUpgrade(1).effectOrDefault(f.D0)},get isUnlocked(){return RankType.rank.unlocks.unlockBooster.canBeApplied},get forceVisible(){return PlayerProgress.rageUnlocked()},get autoUnlocked(){return RageUpgrade(2).canBeApplied},get power(){let e=f.D2;return e=e.plusEffectOf(RankType.rank.unlocks.mu2boost),e=e.powEffectOf(MassUpgrade.stronger),e},formatPower:e=>`+${format(e)}x`,effect(e,t){return e.times(t).add(1)},formatEffect:e=>`${formatX(e)} to Muscler Power`,upgClass:"i-mass-upgrade-2"},stronger:{id:"stronger",name:"Stronger",get currency(){return Currency.mass},get baseCost(){return f.E3},get costMult(){return f.D9.powEffectsOf(RankType.rank.unlocks.mu3cheaper,RankType.tier.unlocks.upgradeLessCost)},get scaling(){return Scaling.massUpgrade},cost(e){const t=MassUpgrade.stronger.config;return getLinearCost(t.scaling.scaleEvery(e),t.baseCost,t.costMult)},bulk(e){const t=MassUpgrade.stronger.config;return t.scaling.scaleEvery(getLinearBulk(e,t.baseCost,t.costMult),!0)},get freeAmount(){return RageUpgrade(6).effectOrDefault(f.D0)},get isUnlocked(){return RankType.rank.unlocks.unlockStronger.canBeApplied},get forceVisible(){return PlayerProgress.rageUnlocked()},get autoUnlocked(){return RageUpgrade(2).canBeApplied},get power(){return f.D1},formatPower:e=>`+${formatPow(e)}`,effect(e,t){let r=e.times(t).add(1);const n=MassUpgradeSoftcap.stronger;return r=softcap(r,n[0].start,n[0].scale,SOFTCAP_TYPE.POWER),r},softcapLevel(e){const t=MassUpgradeSoftcap.stronger;return MassUpgradeSoftcap.softcapLevel(e,t)},formatEffect:e=>`${formatPow(e)} to Booster Power`,upgClass:"i-mass-upgrade-3"},overpower:{id:"overpower",name:"Overpower",get currency(){return Currency.mass},get baseCost(){return f.E100},get costMult(){return f.D1_5},get scaling(){return Scaling.overpower},get isUnlocked(){return!1},get autoUnlocked(){return RageUpgrade(2).canBeApplied},cost(e){return e},bulk(e){return e},get power(){return f.D1},formatPower:()=>"Unknown",effect(e,t){return e.times(t).add(1)},formatEffect:()=>"Unknown",upgClass:"i-mass-upgrade-4"},tickspeed:{id:"tickspeed",name:"Tickspeed",get currency(){return Currency.ragePowers},get baseCost(){return f.D1},get costMult(){return f.D2},get scaling(){return Scaling.tickspeed},cost(e){const t=MassUpgrade.tickspeed.config;return getLinearCost(t.scaling.scaleEvery(e),t.baseCost,t.costMult)},bulk(e){const t=MassUpgrade.tickspeed.config;return t.scaling.scaleEvery(getLinearBulk(e,t.baseCost,t.costMult),!0)},get isUnlocked(){return PlayerProgress.rageUnlocked()},get power(){let e=f.D1_5;return e=e.plusEffectsOf(RankType.tier.unlocks.tickPowerFromTier,RankType.rank.unlocks.rankBoostTickPower),e},formatPower:e=>e.gte(10)?formatX(e):formatPercents(e.minus(1)),effect(e,t){return t.pow(e)},formatEffect:e=>`${formatX(e)} to mass gain`,upgClass:"i-tickspeed"}},C=[{id:0,description:"Boosters add Musclers.",cost:f.D1,effect:()=>MassUpgrade.booster.totalAmount,formatEffect:e=>`+${format(e,0)} Musclers`},{id:1,description:"Strongers add Boosters.",cost:f.E1,effect:()=>MassUpgrade.stronger.totalAmount,formatEffect:e=>`+${format(e,0)} Boosters`},{id:2,description:"You can automatically buy mass upgrades.",cost:f.D25},{id:3,description:"Ranks no longer reset anything.",cost:f.D50},{id:4,description:"You can automatically rank up.",cost:f.E4},{id:5,description:"You can automatically tier up.",cost:f.E5},{id:6,description:"For every 3 tickspeeds add Stronger.",cost:f.E7,effect:()=>MassUpgrade.tickspeed.totalAmount.div(3),formatEffect:e=>`+${format(e,0)} Strongers`},{id:7,description:"Super and Hyper mass upgrade scalings are weaker based on Rage Power.",cost:f.E15,effect:()=>{let e=Currency.ragePowers.value.clampMin(1).log10().clampMin(1).log10().pow(1.25);return e=softcap(e,f.D2_5,f.D0_5,SOFTCAP_TYPE.POWER),f.D0_9.pow(e)},formatEffect:e=>({value:formatPercents(f.D1.minus(e)),softcapped:e.lte(.768433471421)})}],D={rage:C},A={mass:E,main:D},M={id:"rank",name:"Rank",isUnlocked(){return!0},requirement(e){return Decimal.pow10(e.timesEffectOf(RankType.tier.unlocks.reduceRankReq).pow(1.15)).times(10)},bulk(e){return e.lt(10)?f.D0:e.div(10).log10().root(1.15).dividedByEffectOf(RankType.tier.unlocks.reduceRankReq).add(1).floor()},get noReset(){return RageUpgrade(3).canBeApplied},get autoUnlocked(){return RageUpgrade(4).canBeApplied},unlocks:[{id:"unlockMuscler",requirement:1,description:"Unlock mass upgrade 1."},{id:"unlockBooster",requirement:2,description:()=>`Unlock mass upgrade 2, reduce mass upgrade 1 scaling by ${formatPercents(.2,0)}.`,effect:.8},{id:"unlockStronger",requirement:3,description:()=>`Unlock mass upgrade 3, reduce mass upgrade 2 scaling by ${formatPercents(.2,0)}, and mass upgrade 1 boosts itself.`,effects:{cost:.8,boost:()=>MassUpgrade.muscler.boughtAmount.div(20)},mainEffect:"boost",formatEffect:e=>`+${format(e)}`},{id:"mu3cheaper",requirement:4,description:()=>`reduce mass upgrade 3 scaling by ${formatPercents(.2,0)}.`,effect:.8},{id:"mu2boost",requirement:5,description:"mass upgrade 2 boosts itself.",effect:()=>MassUpgrade.booster.boughtAmount.div(40),formatEffect:e=>`+${format(e)}`},{id:"rankBoostsMass",requirement:6,description:`boost mass gain by (x+${formatInt(1)})^${formatInt(2)}, where x is rank.`,effect:()=>RankType.rank.amount.add(1).pow(RankType.rank.unlocks.improveRank6.effectOrDefault(2)),formatEffect:e=>formatX(e)},{id:"tripleMassGain",requirement:13,description:"triple mass gain.",effect:3},{id:"doubleRPGain",requirement:14,description:"double Rage Powers gain.",effect:2},{id:"improveRank6",requirement:17,description:()=>`Rank 6 reward effect is better. [(x+${formatInt(1)})^${formatInt(2)} -> (x+${formatInt(1)})^x^${formatInt(1)}/${formatInt(3)}]`,effect:()=>RankType.rank.amount.add(1).cbrt(),formatEffect:e=>formatX(RankType.rank.unlocks.rankBoostsMass.effectOrDefault(f.D1).pow(e.minus(f.D2)))},{id:"mu3softcap",requirement:34,description:"mass upgrade 3 softcaps 1.2x later.",effect:1.2},{id:"rankBoostTickPower",requirement:40,description:"adds tickspeed power based on ranks.",effect:()=>{const e=Effects.min(2,RankType.rank.unlocks.improveRank40,RankType.rank.unlocks.overpowerRank40);return RankType.rank.amount.root(e).div(100)},formatEffect:e=>`+${formatPercents(e)}`},{id:"rankBoostRP",requirement:45,description:"rank boosts Rage Powers gain.",effect:()=>RankType.rank.amount.add(1).pow(1.5),formatEffect:e=>formatX(e)},{id:"improveRank40",requirement:90,description:"rank 40 reward is stronger.",effect:1.6},{id:"massGainPower",requirement:180,description:()=>`mass gain is raised by ${format(1.025,3)}.`,effect:1.025},{id:"overpowerRank40",requirement:220,description:"rank 40 reward is overpowered.",effect:1}]},P={id:"tier",name:"Tier",isUnlocked(){return RankType.rank.amount.gte(3)||RankType.tier.amount.gte(1)},get autoUnlocked(){return RageUpgrade(5).canBeApplied},requirement(e){return e.add(2).pow(2).round()},bulk(e){return e.sqrt().minus(1).floor()},unlocks:[{id:"reduceRankReq",requirement:1,description:()=>`reduce rank requirements by ${formatPercents(.2,0)}.`,effect:.8},{id:"raiseMassGain",requirement:2,description:()=>`raise mass gain by ${format(1.15,2)}.`,effect:1.15},{id:"upgradeLessCost",requirement:3,description:()=>`reduce all mass upgrade scalings by ${formatPercents(.2,0)}.`,effect:.8},{id:"tickPowerFromTier",requirement:4,description:()=>`adds +${formatPercents(.05,0)} tickspeed power for every tier you have, softcaps at +${formatPercents(.4,0)}.`,effect:()=>{const e=RankType.tier.unlocks.improveTier4.canBeApplied,t=RankType.tier.amount.times(e?.1:.05);return e?softcap(t.add(1),DC.D1_4,DC.D0_75,SOFTCAP_TYPE.POWER).minus(1):t},formatEffect:e=>`+${formatPercents(e)}`},{id:"tierBoostRP",requirement:6,description:"boost rage powers based on tiers.",effect:()=>DC.D2.pow(RankType.tier.amount.timesEffectOf(RankType.tier.unlocks.tier6FromDM)),formatEffect:e=>formatX(e)},{id:"tier6FromDM",requirement:8,description:"Tier 6's reward is boosted based on dark matters.",effect:()=>Currency.darkMatter.value.clampMin(1).log10().add(1).sqrt(),formatEffect:e=>formatPow(e)},{id:"improveTier4",requirement:12,description:"Tier 4's reward is twice as effective and the softcap is removed.",effect:2},{id:"strongerCapWeak",requirement:30,description:()=>`stronger effect's softcap is ${formatPercents(.1,0)} weaker.`,effect:.9},{id:"tierBoostRank380",requirement:55,description:"make rank 380's effect stronger based on tier.",effect:()=>RankType.tier.amount.clampMin(1).log10().add(1).root(4),formatEffect:e=>formatPow(e)},{id:"superTetrLater",requirement:100,description:()=>`Super Tetr scales ${formatInt(5)} later.`,effect:5}]},T={rank:M,tier:P},U=[{id:0,key:"main",name:"Main",subtabs:[{id:0,key:"mass",name:"Mass",component:"MassTab"}]},{id:1,key:"statistics",name:"Statistics",condition:()=>RankType.rank.amount.gt(0)||RankType.tier.amount.gt(0)||PlayerProgress.rageUnlocked(),subtabs:[{id:0,key:"rankRewards",name:"Rank Rewards",component:"RankRewardsTab"}]},{id:2,key:"options",name:"Options",subtabs:[{id:0,key:"options",name:"Options",component:"OptionsTab"}]},{id:3,key:"upgrades",name:"Upgrades",condition:()=>PlayerProgress.rageUnlocked(),subtabs:[{id:0,key:"rage",name:"Rage Upgrades",component:"RageUpgradesTab"}]}],R={firstRank:{id:1,name:"The First Lift",info:"Your potential of gaining weight starts here. How much mass can you gain?"},ragePower:{id:2,name:"Rage Power",info:"You feel outrageous and want to be energy-efficient. You are stronger with less effort needed."},blackHole:{id:3,name:"Black Hole",info:"You pulled up a hidden mystery of cosmos. The force was so strong, it forms a black hole!"}},x=[{name:"Rage Power",option:"ragePower",isUnlocked:()=>PlayerPgrogress.rageUnlocked()},{name:"Dark Matter",option:"darkMatter",isUnlocked:()=>PlayerPgrogress.blackHoleUnlockedUnlocked()}],S={massUpgrade:[{start:f.E2,get scale(){return f.D2_5.timesEffectOf(RageUpgrade(7))}},{start:f.D500,get scale(){return f.D5.timesEffectOf(RageUpgrade(7))}}],tickspeed:[{start:f.E2,scale:f.D2}],rank:[{start:f.D50,scale:f.D1_5}],tier:[{start:f.E1,scale:f.D1_5}],overpower:[{start:f.D50,scale:f.D3}]},O={upgrades:A,ranks:T,tabs:U,tutorials:R,confirmationTypes:x,scaling:S};window.GameDatabase=O,window.mapGameData=function(e,t){const r=[];for(const n of e)r[n.id]=t(n);return r},window.mapGameDataToObject=function(e,t){const r=Object.entries(e),n={};for(let i=0;i<r.length;i++)n[r[i][0]]=t(r[i][1]);return{all:Object.values(n),...n}};r(7642),r(8004),r(3853),r(5876),r(2475),r(5024),r(1698);function B(e){return Array.isArray(e)?[]:{}}function q(e,t){return e instanceof Decimal?new Decimal(e):e instanceof Set?new Set(e):!1!==t.clone&&t.isMergeableObject(e)?N(B(e),e,t):e}function I(e,t,r){return e.concat(t).map((e=>q(e,r)))}function $(e,t,r){const n={};return r.isMergeableObject(e)&&Object.keys(e).forEach((t=>{n[t]=q(e[t],r)})),Object.keys(t).forEach((i=>{e[i]&&e[i]instanceof Decimal?n[i]=new Decimal(t[i]):e[i]&&e[i]instanceof Set?n[i]=new Set(t[i]):r.isMergeableObject(t[i])&&e[i]?n[i]=N(e[i],t[i],r):n[i]=q(t[i],r)})),n}function N(e,t,r={}){if(r.arrayMerge=r.arrayMerge||I,r.isMergeableObject=r.isMergeableObject||F,e instanceof Decimal)return new Decimal(t);if(e instanceof Set)return new Set(t);const n=Array.isArray(t),i=Array.isArray(e),s=n===i;return s?n?r.arrayMerge(e,t,r):$(e,t,r):q(t,r)}function L(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");if(!t){const e=(e,t,r)=>t.map(((t,n)=>e[n]&&e[n]instanceof Decimal?new Decimal(t):e[n]&&e[n]instanceof Set?new Set(t):r.isMergeableObject(t)&&e[n]?N(e[n],t,r):q(t,r)));t={arrayMerge:e}}return e.reduce(((e,r)=>N(e,r,t)),{})}function F(e){return G(e)&&!V(e)}function G(e){return Boolean(e)&&"object"===typeof e}function V(e){const t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t}window.player={mass:f.D0,ranks:{rank:f.D0,tier:f.D0,tetr:f.D0,pent:f.D0,hex:f.D0,beyond:f.D0},ragePowers:f.D0,darkMatter:f.D0,blackHole:f.D0,auto:{ranks:{rank:!1,tier:!1,tetr:!1,pent:!1,hex:!1,beyond:!1},massUpgrades:{muscler:!1,booster:!1,stronger:!1,overpower:!1,tickspeed:!1}},massUpgrades:{muscler:f.D0,booster:f.D0,stronger:f.D0,overpower:f.D0,tickspeed:f.D0},mainUpgrades:{rage:0},records:{gameCreatedTime:Date.now()},lastUpdate:Date.now(),version:0,tutorialBits:0,options:{updateRate:33,lastOpenTab:0,hiddenTabBits:0,automaticTabSwitching:!1,hiddenSubtabBits:Array.repeat(0,10),lastOpenSubtab:Array.repeat(0,10),confirmations:{ragePower:!0,darkMatter:!0}}};const H={defaultStart:L([{},player])};function j(e,t){return e.lt(10)?e:Decimal.pow10(e.log10().pow(t))}function Y(e,t,r,n){if(e.lt(t))return e;switch(n){case SOFTCAP_TYPE.POWER:return e.div(t).pow(r).times(t);case SOFTCAP_TYPE.MULT:return e.minus(t).times(r).add(t);case SOFTCAP_TYPE.DILATION:return j(e.div(t),r).times(t);case SOFTCAP_TYPE.LOG:return e.div(t).log(power).add(1).times(t);default:throw new Error(`Unexpected softcap type: ${n}`)}}function z(e,t,r,n,i=!1){const s=new Decimal(t);if(e.lt(s))return e;const a=new Decimal(r),o=s.log10();switch(n){case SCALE_TYPE.POWER:return i?e.div(s).root(a).mul(s):e.div(s).pow(a).mul(s);case SCALE_TYPE.EXP:return i?e.div(s).max(1).log(a).add(s):a.pow(e.sub(s)).mul(s);case SCALE_TYPE.DILATION:return i?Decimal.pow10(e.log10().div(o).root(a).mul(o)):Decimal.pow10(e.log10().div(o).pow(a).mul(o));case SCALE_TYPE.ALT_EXP:return i?e.div(s).max(1).log(a).add(1).mul(s):a.pow(e.div(s).sub(1)).mul(s);default:throw new Error(`Unexpected scale type: ${n}`)}}function W(e){return e%4===3?e>=7?SCALE_TYPE.EXP_ALT:SCALE_TYPE.EXP:e>=6?SCALE_TYPE.DILATION:SCALE_TYPE.POWER}class X{constructor(e){this.scalings=e}scale(e,t,r=!1){const n=this.scalings[t];return void 0===n?e:z(e,n.start,n.scale,W(t),r)}scaleEvery(e,t=!1,r=[]){const n=SCALING_TYPE.length;let i=e;for(let s=0;s<n;s++){const e=t?n-s-1:s,a=r[e]??DC.D1;i=t?this.scale(i.mul(a),e,t):this.scale(i,e,t).div(a)}return i}getName(e){let t=-1;for(let r=0;r<this.scalings.length;r++){if(e.lt(this.scalings[r].start))break;t=r}return-1===t?"":`${SCALING_TYPE[t]}${t%4===3?"-":" "}`}}const K=mapGameDataToObject(GameDatabase.scaling,(e=>new X(e)));r(4114);class J{constructor(e){this._getValue=e,J.registerLazy(this)}static get registrar(){return void 0===J._registrar&&(J._registrar=[]),J._registrar}static registerLazy(e){J.registrar.push(e)}static invalidateAll(){for(const e of J.registrar)e.invalidate()}get value(){return void 0===this._value&&(this._value=this._getValue()),this._value}invalidate(){this._value=void 0}invalidateOn(...e){for(const t of e)EventHub.logic.on(t,(()=>this.invalidate()));return this}}window.Lazy=J;const Q={};class Z extends y{constructor(e,t){super(e),this.type=t}get requirement(){return this.config.requirement}get isUnlocked(){return this.type.amount.gte(this.requirement)}get isEffectActive(){return this.isUnlocked}get description(){const e=this.config.description;return"function"===typeof e?e():e}}class ee extends y{constructor(e){super(e),this.unlocks=e.unlocks.mapToObject((e=>e.id),(e=>new Z(e,this))),this.nextUnlock=new Lazy((()=>Object.values(this.unlocks).find((e=>!e.isUnlocked)))),this.cachedRequirement=new Lazy((()=>this.config.requirement(this.amount)))}get isUnlocked(){return this.config.isUnlocked()}get amount(){return player.ranks[this.id]}set amount(e){player.ranks[this.id]=e,this.nextUnlock.invalidate(),this.cachedRequirement.invalidate()}get name(){return this.config.name}get previous(){return re.previous(this.id)}get noReset(){return this.config.noReset??!1}get description(){const e=this.isRank?"mass and upgrades":this.previous.name,t=`${this.name} up.`;return this.noReset?t:`Reset ${e}, but ${t}`}get reward(){const e=this.nextUnlock.value;return void 0===e?"No rewards available...":`At ${this.name} ${format(e.requirement,0)} - ${e.description}`}get requirement(){return this.cachedRequirement.value}get canReset(){const e=this.isRank?Currency.mass.value:this.previous.amount;return e.gte(this.requirement)}get isRank(){return"rank"===this.id}reset(e=!1){(this.canReset||e)&&(!e&&(this.amount=this.amount.add(1),this.noReset)||(this.isRank?(Currency.mass.reset(),MassUpgrade.muscler.reset(),MassUpgrade.booster.reset(),MassUpgrade.stronger.reset(),MassUpgrade.overpower.reset(),Tutorial.firstRank.unlock()):(this.previous.amount=f.D0,this.previous.reset(!0))))}bulk(){if(!this.canReset)return;const e=this.isRank?Currency.mass.value:this.previous.amount,t=this.config.bulk(e);t.lte(this.amount)||(this.noReset?this.amount=t:(this.amount=t.minus(1),this.reset()))}get autoUnlocked(){return this.config.autoUnlocked??!1}get auto(){return Autobuyer.rank(re.indexOf(this.id)+1)}}const te=mapGameDataToObject(GameDatabase.ranks,(e=>new ee(e))),re={_previousCache:Object.values(te.all).reduce(((e,t,r,n)=>e.set(t.id,n[r-1])),new Map),_rankIndex:Object.values(te.all).reduce(((e,t,r)=>e.set(t.id,r)),new Map),previous(e){return re._previousCache.get(e)},indexOf(e){return re._rankIndex.get(e)}};class ne extends _{get cost(){return this.config.cost(this.boughtAmount)}get name(){const e=this.config.scaling.getName(this.boughtAmount),t=this.config.name;return`${e}${t}`}get boughtAmount(){return player.massUpgrades[this.id]}set boughtAmount(e){player.massUpgrades[this.id]=e}get freeAmount(){return this.config.freeAmount??f.D0}get totalAmount(){return this.boughtAmount.add(this.freeAmount)}get currency(){return this.config.currency}get power(){return this.config.power}get isCustomEffect(){return!0}get effectValue(){return this.config.effect(this.totalAmount,this.power)}get isUnlocked(){return this.config.isUnlocked}get isEffectActive(){return this.isUnlocked}get isAvailableForPurchase(){return this.isUnlocked}reset(){this.boughtAmount=f.D0}buyMax(){if(!this.canBeBought)return;const e=this.config.bulk(this.currency.value);e.lte(this.amount)||(this.boughtAmount=e.minus(1),this.purchase())}get softcapLevel(){const e=this.config.softcapLevel;return e?e(this.effectValue):0}get autoUnlocked(){return this.config.autoUnlocked??!1}get auto(){return Autobuyer.massUpgrade(ie.indexOf(this.id)+1)}get forceVisible(){return this.config.forceVisible??!1}}const ie=mapGameDataToObject(GameDatabase.upgrades.mass,(e=>new ne(e)));ie.indexOf=function(){const e=Object.values(ie.all).reduce(((e,t,r)=>e.set(t.id,r)),new Map);return t=>e.get(t)}();const se={stronger:[{level:1,get start(){let e=f.E1;return e=e.timesEffectOf(RankType.rank.unlocks.mu3softcap),e},get scale(){return f.D0_5}}],softcapLevel(e,t){let r=0;for(const n of t){if(e.lt(n.start))return r;r=n.level}return r}};class ae extends k{get key(){throw new NotImplementedError}get bitIndex(){return this.id}get bits(){return player.mainUpgrades[this.key]}set bits(e){player.mainUpgrades[this.key]=e}get url(){return`images/upgrades/${this.key}/${this.id}.png`}get noReset(){return!1}reset(){this.isBought=!1}}class oe extends ae{get key(){return"rage"}get currency(){return Currency.ragePowers}get noReset(){return 2===this.id||4===this.id||5===this.id}}const ce=oe.createAccessor(GameDatabase.upgrades.main.rage),ue={all:ce.index,reset(){for(const e of ue.all)e.noReset||e.reset()}},le={interval:null,devSpeed:1,get updateRate(){return player.options.updateRate},set updateRate(e){player.options.updateRate=e,this.restart()},start(){if(null!==this.interval)throw new Error("GameLoop has already started.");this.interval=setInterval((()=>this.tick()),this.updateRate)},stop(){if(null===this.interval)throw new Error("GameLoop has not started yet.");clearInterval(this.interval),this.interval=null},restart(){this.stop(),this.start()},tick(){let e=Date.now()-player.lastUpdate;player.lastUpdate+=e,d&&(e*=this.devSpeed),Currency.mass.tick(e/1e3),PlayerProgress.blackHoleUnlocked()&&Currency.blackHole.tick(e/1e3),Autobuyers.tick(),GameUI.update(),EventHub.dispatch(GAME_EVENT.GAME_TICK_AFTER)}};class de{add(e,t){throw new NotImplementedError}subtract(e,t){throw new NotImplementedError}multiply(e,t){throw new NotImplementedError}divide(e,t){throw new NotImplementedError}max(e,t){throw new NotImplementedError}min(e,t){throw new NotImplementedError}eq(e,t){throw new NotImplementedError}gt(e,t){throw new NotImplementedError}gte(e,t){throw new NotImplementedError}lt(e,t){throw new NotImplementedError}lte(e,t){throw new NotImplementedError}}de.number=new class extends de{add(e,t){return e+t}subtract(e,t){return e-t}multiply(e,t){return e*t}divide(e,t){return e/t}max(e,t){return Math.max(e,t)}min(e,t){return Math.min(e,t)}eq(e,t){return e===t}gt(e,t){return e>t}gte(e,t){return e>=t}lt(e,t){return e<t}lte(e,t){return e<=t}},de.decimal=new class extends de{add(e,t){return Decimal.add(e,t)}subtract(e,t){return Decimal.subtract(e,t)}multiply(e,t){return Decimal.multiply(e,t)}divide(e,t){return Decimal.divide(e,t)}max(e,t){return Decimal.max(e,t)}min(e,t){return Decimal.min(e,t)}eq(e,t){return Decimal.eq(e,t)}gt(e,t){return Decimal.gt(e,t)}gte(e,t){return Decimal.gte(e,t)}lt(e,t){return Decimal.lt(e,t)}lte(e,t){return Decimal.lte(e,t)}};class pe{get value(){throw new NotImplementedError}set value(e){throw new NotImplementedError}get operations(){throw new NotImplementedError}add(e){this.value=this.operations.add(this.value,e)}subtract(e){this.value=this.operations.max(this.operations.subtract(this.value,e),0)}multiply(e){this.value=this.operations.multiply(this.value,e)}divide(e){this.value=this.operations.divide(this.value,e)}eq(e){return this.operations.eq(this.value,e)}gt(e){return this.operations.gt(this.value,e)}gte(e){return this.operations.gte(this.value,e)}lt(e){return this.operations.lt(this.value,e)}lte(e){return this.operations.lte(this.value,e)}purchase(e){return!!this.gte(e)&&(this.subtract(e),!0)}bumpTo(e){this.value=this.operations.max(this.value,e)}dropTo(e){this.value=this.operations.min(this.value,e)}get startingValue(){throw new NotImplementedError}get gainPerSecond(){throw new NotImplementedError}reset(){this.value=this.startingValue}tick(e){throw new NotImplementedError}gain(){this.add(this.gainPerSecond)}}class fe extends pe{get operations(){return de.decimal}get sign(){return this.value.sign}get layer(){return this.value.layer}get mag(){return this.value.mag}get startingValue(){return f.D0}get gainPerSecond(){throw new NotImplementedError}tick(e){this.add(this.gainPerSecond.times(e))}}window.DecimalCurrency=fe,pe.mass=new class extends fe{get value(){return player.mass}set value(e){player.mass=e}get gainPerSecond(){let e=f.D1;return e=e.plusEffectOf(MassUpgrade.muscler),e=e.timesEffectsOf(RankType.rank.unlocks.rankBoostsMass,RankType.rank.unlocks.tripleMassGain,MassUpgrade.tickspeed),e=e.powEffectOf(RankType.tier.unlocks.raiseMassGain),e}get name(){return"Mass"}},pe.ragePowers=new class extends fe{get value(){return player.ragePowers}set value(e){player.ragePowers=e}get gainPerSecond(){if(pe.mass.lt(f.E15))return f.D0;let e=pe.mass.value.div(f.E15).cbrt();return e=e.timesEffectsOf(RankType.rank.unlocks.doubleRPGain,RankType.tier.unlocks.tierBoostRP,RankType.rank.unlocks.rankBoostRP),e}get canReset(){return pe.mass.gte(f.E15)}requestReset(){this.canReset&&(ConfirmationTypes.ragePower.option?Modal.confirmation.show({options:"ragePower",confirmFn:()=>this.resetLayer()}):this.resetLayer())}resetLayer(e=!1){e||this.gain();const t=RankType.all.last();t.amount=f.D0,t.reset(!0),Tutorial.ragePower.unlock()}get name(){return"Rage Power"}},pe.darkMatter=new class extends fe{get value(){return player.darkMatter}set value(e){player.darkMatter=e}get gainPerSecond(){return pe.ragePowers.value.div(f.E20).root(4).floor()}get canReset(){return pe.ragePowers.gte(f.E20)}requestReset(){this.canReset&&(ConfirmationTypes.darkMatter.option?Modal.confirmation.show({options:"darkMatter",confirmFn:()=>this.resetLayer()}):this.resetLayer())}resetLayer(e=!1){e||this.gain(),RageUpgrades.reset(),MassUpgrade.tickspeed.reset(),pe.ragePowers.reset(),pe.ragePowers.resetLayer(!0),Tutorial.blackHole.unlock()}get name(){return"Dark Matter"}},pe.blackHole=new class extends fe{get value(){return player.blackHole}set value(e){player.blackHole=e}get gainPerSecond(){return f.D1}get name(){return"Black Hole"}};class me{constructor(e,t){this._parent=e,this.config=t}get name(){return this.config.name}get symbol(){return this.config.symbol}get isPermanentlyHidden(){return!1}get hidable(){return this.config.hidable}get isHidden(){return 0!==(player.options.hiddenSubtabBits[this._parent.id]&1<<this.id)&&this.hidable}get isUnlocked(){return void 0===this.config.condition||this.config.condition()}get isAvailable(){return!this.isPermanentlyHidden&&(this.isOpen||!this.isHidden&&this.isUnlocked)}get key(){return this.config.key}get id(){return this.config.id}show(e){this._parent.show(e,this)}unhideTab(){this._parent.unhideTab(),player.options.hiddenSubtabBits[this._parent.id]&=~(1<<this.id)}toggleVisibility(){this._parent.id===be.current.id&&this.id===be.current._currentSubtab.id||(player.options.hiddenSubtabBits[this._parent.id]^=1<<this.id)}get isOpen(){return ui.view.tab===this._parent.key&&ui.view.subtab===this.key}}function he(e,t){return t.find((t=>t.id===player.options.lastOpenSubtab[e]))??t[0]}function ge(e,t){const r=e.filter((e=>e.isAvailable)),n=r.indexOf(t),i=ui.view.shiftDown?-1:1;let s=n+i;return s=s<0?r.length-1:s,s=s>r.length-1?0:s,r[s]}class ye{constructor(e){this.config=e,this.isOpened=!1;const t=[];for(const r of e.subtabs){const e=new me(this,r);this[r.key]=e,t.push(e)}this.subtabs=t,this._currentSubtab=he(this.id,t)}get name(){return this.config.name}get key(){return this.config.key}get id(){return this.config.id}get isPermanentlyHidden(){return!1}get hidable(){return this.config.hidable}get isHidden(){const e=this.subtabs.some((e=>e.isAvailable));return(0!==(player.options.hiddenTabBits&1<<this.id)||!e)&&this.hidable}get isUnlocked(){return void 0===this.config.condition||this.config.condition()}get isAvailable(){return!this.isPermanentlyHidden&&(this.isOpen||!this.isHidden&&this.isUnlocked)}get isOpen(){return ui.view.tab===this.key}show(e,t=void 0){(e||player.options.automaticTabSwitching)&&(void 0!==t?this._currentSubtab=t:ui.view.tab===this.key&&ui.view.initialized&&e?this._currentSubtab=ge(this.subtabs,this._currentSubtab):this._currentSubtab=he(this.id,this.subtabs),this._currentSubtab.isUnlocked||this.resetToUnlocked(),this._currentSubtab.isAvailable||this.resetToAvailable(),ui.view.tab=this.key,ui.view.subtab=this._currentSubtab.key,e&&Modal.hideAll(),EventHub.dispatch(GAME_EVENT.TAB_CHANGED,this,this._currentSubtab))}unhideTab(){player.options.hiddenTabBits&=~(1<<this.id)}toggleVisibility(){this.id!==be.current.id&&(player.options.hiddenTabBits^=1<<this.id)}resetToAvailable(){this._currentSubtab=this.subtabs.find((e=>e.isAvailable)),void 0===this._currentSubtab&&(this._currentSubtab=this.subtabs[0],this._currentSubtab.unhideTab())}resetToUnlocked(){this._currentSubtab=this.subtabs.find((e=>e.isUnlocked))}}const ve=GameDatabase.tabs.mapToObject((e=>e.key),(e=>new ye(e))),be=function(){return{all:Object.values(ve),get current(){return be.all.find((e=>e.isOpen))},currentUIFormat:[ve.main,ve.statistics,ve.upgrades,ve.options]}}();EventHub.logic.on(GAME_EVENT.TAB_CHANGED,(()=>{const e=be.current.id;player.options.lastOpenTab=e,player.options.lastOpenSubtab[e]=be.current._currentSubtab.id}));var we=r(2451),ke=r.n(we),_e=function(){var e=this,t=e._self._c;return e.view.initialized?t("div",e._g({staticClass:"l-game-ui",on:{click:e.hideTooltip}},e.swipeHandlers),[t("transition",{attrs:{name:"a-drawer"}},[e.showDrawer?t("GameDrawer",{on:{"close-drawer":function(t){e.showDrawer=!1}}}):e._e()],1),t("div",[t("transition",{attrs:{name:"a-overlay"}},[e.showDrawer?t("v-touch",e._g({staticClass:"l-background-overlay"},e.swipeHandlers)):e._e()],1),e.currentModal?t("div",{staticClass:"l-background-overlay l-modal-overlay"}):e._e(),e.currentModal?t("PopupModal",{attrs:{modal:e.currentModal}}):e._e(),t("AppBar",{on:{"toggle-drawer":e.toggleDrawer}}),t("v-touch",e._g({staticClass:"l-view"},e.swipeHandlers),[t("HeaderResources"),t(e.page,{tag:"component",attrs:{id:"page"}})],1)],1)],1):e._e()},Ee=[],Ce=function(){var e=this,t=e._self._c;return t("div",{staticClass:"l-game-header"},[t("div",{staticClass:"l-header-resource-row"},[t("HeaderResource",{attrs:{"img-class":"i-mass",amount:e.mass.amount,"gain-rate":e.mass.rate,"format-fn":e.formatMass,name:"Mass",tooltip:e.massTooltip,"show-tooltip":!0}}),t("HeaderResource",{attrs:{"img-class":"i-rage-powers",amount:e.ragePowers.amount,"gain-rate":e.ragePowers.rate,"text-class":"c-rage-powers-amount","format-fn":e.formatNoPlaces,name:"Rage Powers","is-rate":!1,tooltip:e.ragePowersTooltip,"show-tooltip":!e.ragePowers.canReset,"click-fn":e.ragePowerReset}})],1),e.darkMatter.unlocked?t("div",{staticClass:"l-header-resource-row"},[t("HeaderResource",{attrs:{"img-class":"i-dark-matter",amount:e.darkMatter.amount,"gain-rate":e.darkMatter.rate,"text-class":"c-dark-matter-amount","format-fn":e.formatNoPlaces,name:"Dark Matter","is-rate":!1,tooltip:e.darkMatterTooltip,"show-tooltip":!e.darkMatter.canReset,"click-fn":e.darkMatterReset}}),t("HeaderResource",{attrs:{"img-class":"i-black-hole",amount:e.blackHole.amount,"gain-rate":e.blackHole.rate,"text-class":"c-dark-matter-amount","format-fn":e.formatMass,name:"Black Hole",tooltip:e.blackHoleTooltip,"show-tooltip":!0}})],1):e._e()])},De=[],Ae=function(){var e=this,t=e._self._c;return t("div",{staticClass:"l-header-resource"},[t("div",{staticClass:"i-header",class:e.imgClass,on:{click:function(t){return t.stopPropagation(),e.handleClick.apply(null,arguments)}}}),t("div",{staticClass:"c-header-resource-info",class:e.textClass},[t("span",[e._v(e._s(e.formatValue(e.amount)))]),e.isRate?t("span",[e._v("(+"+e._s(e.formatValue(e.gainRate))+"/sec)")]):t("span",[e._v("(+"+e._s(e.formatValue(e.gainRate))+")")])]),t("transition",{attrs:{name:"a-tooltip"}},[e.showTooltip&&e.tooltipActive?t("div",{staticClass:"l-header-resource-tooltip"},[t("span",{staticClass:"c-header-resource-tooltip__name"},[e._v("["+e._s(e.name)+"]")]),t("div",{staticClass:"o-split-line"}),t("b",[e._v(e._s(e.tooltip))])]):e._e()])],1)},Me=[];let Pe=0;var Te={props:{imgClass:{type:String,required:!0},amount:{type:Decimal,required:!0},gainRate:{type:Decimal,required:!0},isRate:{type:Boolean,required:!1,default:!0},formatFn:{type:Function,required:!1},textClass:{type:String,required:!1},tooltip:{type:String,required:!1},showTooltip:{type:Boolean,required:!1,default:!1},name:{type:String,required:!1},clickFn:{type:Function,required:!1}},computed:{view(){return this.$viewModel},tooltipActive(){return this.resID===this.view.resourceTooltipId}},watch:{showTooltip(e){!1===e&&(this.view.resourceTooltipId=-1)}},created(){this.showTooltip&&(this.resID=Pe++)},methods:{formatValue(e){return void 0!==this.formatFn?this.formatFn(e):format(e)},handleClick(e){e.preventDefault(),this.showTooltip||!this.clickFn?this.tooltipActive?this.view.resourceTooltipId=-1:this.view.resourceTooltipId=this.resID:this.clickFn()}}},Ue=Te,Re=r(1656),xe=(0,Re.A)(Ue,Ae,Me,!1,null,null,null),Se=xe.exports,Oe={name:"HeaderResources",components:{HeaderResource:Se},data(){return{mass:{amount:new Decimal,rate:new Decimal},ragePowers:{amount:new Decimal,rate:new Decimal,canReset:!1},darkMatter:{amount:new Decimal,rate:new Decimal,unlocked:!1,canReset:!1},blackHole:{amount:new Decimal,rate:new Decimal,unlocked:!1}}},computed:{massTooltip(){return`You have pushed ${formatMass(this.mass.amount)}.`},ragePowersTooltip(){return`Reach over ${formatMass(1e15)} of normal mass to reset previous features for gain Rage Powers.`},darkMatterTooltip(){return`Reach over ${format(1e20)} Rage Power to reset all previous features for gain Dark Matters.`},blackHoleTooltip(){return`You have ${formatMass(this.blackHole.amount)} of black hole.`}},methods:{update(){const e=this.mass;e.amount.copyFrom(Currency.mass.value),e.rate=Currency.mass.gainPerSecond;const t=this.ragePowers;t.amount.copyFrom(Currency.ragePowers.value),t.rate=Currency.ragePowers.gainPerSecond,t.canReset=Currency.ragePowers.canReset;const r=this.darkMatter;r.unlocked=PlayerProgress.rageUnlocked(),r.unlocked&&(r.amount.copyFrom(Currency.darkMatter.value),r.rate=Currency.darkMatter.gainPerSecond,r.canReset=Currency.darkMatter.canReset);const n=this.blackHole;n.unlocked=PlayerProgress.blackHoleUnlocked(),n.unlocked&&(n.amount.copyFrom(Currency.blackHole.value),n.rate=Currency.blackHole.gainPerSecond)},formatNoPlaces(e){return format(e,0)},ragePowerReset(){Currency.ragePowers.requestReset()},darkMatterReset(){Currency.darkMatter.requestReset()}}},Be=Oe,qe=(0,Re.A)(Be,Ce,De,!1,null,null,null),Ie=qe.exports,$e=function(){var e=this,t=e._self._c;return t("div",[e._l(e.rankRows,(function(r,n){return t("div",{key:n+"rank",staticClass:"l-rank-row"},[t("RankButton",{attrs:{rank:r[0]}}),2===r.length?t("RankButton",{attrs:{rank:r[1]}}):e._e()],1)})),e._l(e.mainUpgrades,(function(e){return t("MassUpgradeRow",{key:e.name,attrs:{upgrade:e}})})),e.ragePowersUnlocked?t("div",{staticClass:"c-second-upgrades"},e._l(e.secondUpgrades,(function(e){return t("MassUpgradeRow",{key:e.name,attrs:{upgrade:e}})})),1):e._e()],2)},Ne=[],Le=function(){var e=this,t=e._self._c;return e.isUnlocked?t("div",{staticClass:"l-rank-container"},[t("div",{staticClass:"c-rank-title"},[e.autoUnlocked?t("PrimaryToggleButton",{attrs:{lebel:"Auto: "},model:{value:e.auto,callback:function(t){e.auto=t},expression:"auto"}}):e._e(),t("span",[e._v(e._s(e.name))]),t("span",{staticClass:"c-rank-amount"},[e._v(e._s(e.format(e.amount,0)))])],1),t("PrimaryButton",{staticClass:"o-rank-btn",attrs:{enabled:e.canReset},on:{click:e.reset}},[t("span",[e._v(e._s(e.description))]),t("br"),t("span",[e._v("(Requires: "+e._s(e.requirementText)+")")]),null!==e.reward?[t("span",{staticClass:"o-split-line"}),t("span",[e._v("Next Reward:")]),t("br"),t("span",[e._v(e._s(e.reward))])]:e._e()],2)],1):e._e()},Fe=[],Ge=function(){var e=this,t=e._self._c;return t("button",e._g({staticClass:"o-primary-btn",class:e.classObject},e.$listeners),[e._t("default")],2)},Ve=[],He={name:"PrimaryButton",props:{enabled:{type:Boolean,required:!1,default:!0}},computed:{classObject(){return{"o-primary-btn--disabled":!this.enabled}}}},je=He,Ye=(0,Re.A)(je,Ge,Ve,!1,null,null,null),ze=Ye.exports,We=function(){var e=this,t=e._self._c;return t("PrimaryButton",e._b({on:{click:function(t){return e.emitInput(!e.value)}}},"PrimaryButton",e.$attrs,!1),[e._v(" "+e._s(e.displayText)+" ")])},Xe=[],Ke={name:"PrimaryToggleButton",components:{PrimaryButton:ze},props:{label:{type:String,required:!1,default:""},on:{type:String,required:!1,default:"ON"},off:{type:String,required:!1,default:"OFF"},value:{type:Boolean,required:!0}},computed:{displayText(){return`${this.label} ${this.value?this.on:this.off}`.trim()}}},Je=Ke,Qe=(0,Re.A)(Je,We,Xe,!1,null,null,null),Ze=Qe.exports,et={name:"RankButton",components:{PrimaryButton:ze,PrimaryToggleButton:Ze},props:{rank:{type:Object,required:!0}},data(){return{isUnlocked:!0,amount:new Decimal,description:"",canReset:!1,requirement:new Decimal,reward:"",autoUnlocked:!1,auto:!1}},computed:{name(){return this.rank.name},requirementText(){const e=this.rank.isRank;return e?formatMass(this.requirement):`${this.rank.previous.name} ${format(this.requirement,0)}`}},watch:{auto(e){this.rank.auto.isActive=e}},methods:{update(){const e=this.rank;this.isUnlocked=e.isUnlocked,this.isUnlocked&&(this.amount.copyFrom(e.amount),this.description=e.description,this.reward=e.reward,this.canReset=e.canReset,this.requirement=e.requirement,this.autoUnlocked=e.autoUnlocked,this.auto=e.auto.isActive)},reset(){this.rank.reset()}}},tt=et,rt=(0,Re.A)(tt,Le,Fe,!1,null,null,null),nt=rt.exports,it=function(){var e=this,t=e._self._c;return e.isUnlocked||e.forceVisible?t("div",{staticClass:"l-mass-upgrade-container"},[t("div",{staticClass:"l-mass-upgrade-row"},[t("div",{staticClass:"c-mass-name"},[t("div",{class:e.imageClass}),t("div",{staticClass:"c-mass-upgrade-name-amount"},[t("div",{class:e.nameClass},[e._v(" "+e._s(e.name)+" ")]),t("div",{staticClass:"o-amount"},[e._v(" ["+e._s(e.amountText)+"] ")])])]),t("PrimaryButton",{staticClass:"o-buy-mass-upgrade-btn o-buy-mass-upgrade-btn--main",attrs:{enabled:e.isAffordable},on:{click:e.buy}},[e._v(" "+e._s(e.costText)+" ")]),t("PrimaryButton",{staticClass:"o-buy-mass-upgrade-btn",on:{click:e.max}},[e._v(" Buy Max ")]),e.autoUnlocked?t("PrimaryToggleButton",{staticClass:"o-buy-mass-upgrade-btn o-buy-mass-upgrade-btn--auto",on:{click:e.max},model:{value:e.auto,callback:function(t){e.auto=t},expression:"auto"}}):e._e()],1),t("div",{staticClass:"l-mass-upgrade-row--text"},[e._v(" Power: "+e._s(e.powerText)+" ")]),t("div",{staticClass:"l-mass-upgrade-row--text"},[e._v(" Effect: "+e._s(e.effectText)+" "),e.softcapLevel>0?t("span",{staticClass:"o-softcapped"},[e._v(" (softcapped"+e._s(1===e.softcapLevel?"":`^${e.format(e.softcapLevel,0)}`)+") ")]):e._e()])]):e._e()},st=[],at={name:"MassUpgradeRow",components:{PrimaryButton:ze,PrimaryToggleButton:Ze},props:{upgrade:{type:Object,required:!0}},data(){return{name:"",isUnlocked:!1,amount:new Decimal,free:new Decimal,isAffordable:!1,cost:new Decimal,powerText:"",effectText:"",softcapLevel:0,autoUnlocked:!1,auto:!1,forceVisible:!1}},computed:{imageClass(){return["i-upgrade",this.upgrade.config.upgClass]},amountText(){return this.free.eq(0)?format(this.amount,0):this.amount.eq(0)?format(this.free,0):`${format(this.amount,0)} + ${format(this.free,0)}`},costText(){if(!this.isUnlocked)return"Locked";const e=this.upgrade.currency;let t;return t=e===Currency.mass?formatMass(this.cost):`${format(this.cost,0)} ${e.name}`,this.autoUnlocked?t:`Cost: ${t}`},nameClass(){return this.name.length>=10?"c-mass-upgrade-name--small":""}},watch:{auto(e){this.upgrade.auto.isActive=e}},methods:{update(){const e=this.upgrade;if(this.isUnlocked=e.isUnlocked,this.isUnlocked)this.isAffordable=e.isAffordable,this.cost=e.cost;else if(this.forceVisible=e.forceVisible,!this.forceVisible)return;this.name=e.name,this.amount.copyFrom(e.boughtAmount),this.free.copyFrom(e.freeAmount),this.powerText=e.config.formatPower(e.power);const t=e.effectValue;this.effectText=e.config.formatEffect(t),this.softcapLevel=e.softcapLevel,this.autoUnlocked=e.autoUnlocked,this.auto=this.upgrade.auto.isActive},buy(){this.isUnlocked&&this.upgrade.purchase()},max(){this.isUnlocked&&this.upgrade.buyMax()}}},ot=at,ct=(0,Re.A)(ot,it,st,!1,null,null,null),ut=ct.exports,lt={name:"MassTab",components:{RankButton:nt,MassUpgradeRow:ut},data(){return{ragePowersUnlocked:!1}},computed:{rankRows(){const e=RankType.all,t=[],r=e.length%2!==0;for(let n=0;n+1<e.length;n+=2)t.push([e[n],e[n+1]]);return r&&t.push([e.last()]),t},mainUpgrades(){return[MassUpgrade.muscler,MassUpgrade.booster,MassUpgrade.stronger,MassUpgrade.overpower]},secondUpgrades(){return[MassUpgrade.tickspeed]}},methods:{update(){this.ragePowersUnlocked=PlayerProgress.rageUnlocked()}}},dt=lt,pt=(0,Re.A)(dt,$e,Ne,!1,null,null,null),ft=pt.exports,mt=function(){var e=this,t=e._self._c;return t("div",e._l(e.ranks,(function(r,n){return t("RankBox",{key:r.id,attrs:{"is-expanded":e.isExpanded(n),rank:r,position:n},on:{expand:function(t){return e.expand(n)}}})})),1)},ht=[],gt=function(){var e=this,t=e._self._c;return e.isAvailable?t("div",{staticClass:"l-rank-info",on:{click:function(t){return e.$emit("expand",e.position)}}},[t("div",[t("span",{staticClass:"o-rank-name"},[e._v(e._s(e.rank.name))]),t("i",{class:e.expandClass})]),e.isExpanded?t("div",{staticClass:"c-rank-unlock-container"},[e._l(e.unlocks,(function(r,n){return[e.enrtyVisibilities[n]?t("div",{key:r.id,staticClass:"o-rank-unlock"},[t("div",{staticClass:"o-rank-name--small"},[e._v(" "+e._s(e.name)+" "+e._s(e.format(r.requirement,0))+" ")]),t("DescriptionDisplay",{attrs:{config:r.config}}),t("EffectDisplay",{attrs:{config:r.config}})],1):e._e()]}))],2):e._e()]):e._e()},yt=[],vt=function(){var e=this,t=e._self._c;return e.isVisible?t("span",{class:e.classObject},[e._v(" "+e._s(e.title)+" "+e._s(e.description)+" ")]):e._e()},bt=[];function wt(e){return"number"===typeof e}function kt(e){return"string"===typeof e}function _t(e){return"function"===typeof e}function Et(e){return e instanceof Decimal}var Ct={name:"DescriptionDisplay",props:{config:{type:Object,required:!1,default:void 0},name:{type:String,required:!1,default:void 0},length:{type:Number,required:!1,default:void 0},title:{type:String,required:!1,default:""}},data(){return{isVisible:!1,description:""}},computed:{classObject(){const e=this.name;if(void 0===e)return;const t={};return t[e]=!0,this.description.length>=this.length&&(t[`${e}--small-text`]=!0),t}},watch:{config:{immediate:!0,handler(e){this.updateFunction=()=>{};const t=e?.description,r=e=>e.charAt(0).toUpperCase()+e.slice(1);if(this.isVisible=void 0!==t,!this.isVisible)return;if(kt(t))return void(this.description=r(t));if(!_t(t))throw new Error(`DescriptionDisplay config.description has  unsupported type "${typeof t}"`);const n=t();if(kt(n))return this.description=r(n),void(this.updateFunction=()=>this.description=r(t()));throw new Error(`DescriptionDisplay config.description is a function which returns unsupported type "${typeof n}"`)}}},beforeCreate(){this.updateFunction=()=>{}},methods:{update(){this.updateFunction()}}},Dt=Ct,At=(0,Re.A)(Dt,vt,bt,!1,null,null,null),Mt=At.exports,Pt=function(){var e=this,t=e._self._c;return e.isVisible&&void 0!==e.effectDisplay?t("span",[e.br?t("br"):e._e(),e._v(" "+e._s(e.labelDisplay)),t("span",{domProps:{innerHTML:e._s(e.effectDisplay)}})]):e._e()},Tt=[],Ut={name:"EffectDisplay",props:{config:{type:Object,required:!1,default:void 0},br:{type:Boolean,required:!1},label:{type:String,default:"Currently",required:!1},ignoreCapped:{type:Boolean,required:!1,default:!1}},data(){return{isVisible:!1,effectValue:0,cap:Number.MAX_VALUE,hasCap:!1,softcapped:!1}},computed:{reachedCap(){return this.hasCap&&this.reachedCapFunction()},labelDisplay(){return this.config.noLabel?"":`${this.reachedCap&&!this.ignoreCapped?"Capped":this.label}: `},effectDisplay(){const e=this.formatEffect(this.reachedCap?this.cap:this.effectValue);return e instanceof Object?e.softcapped?`${e.value}<span class="o-softcap">(softcapped)</span>`:e.value:e}},watch:{config:{immediate:!0,handler(e){this.updateEffect=()=>{},this.updateCap=()=>{};const t=e?.effect||e?.effects?.[e?.mainEffect],r=e?.formatEffect;if(this.isVisible=void 0!==t&&void 0!==r,!this.isVisible)return;if(this.formatEffect=r,wt(t))return void(this.effectValue=t);if(Et(t))return void(this.effectValue=t.copy());if(!_t(t))throw new Error(`EffectDisplay config.effect has  unsupported type "${typeof t}"`);const n=t();if(wt(n))this.effectValue=n,this.updateEffect=()=>this.effectValue=t();else{if(!Et(n))throw new Error(`EffectDisplay config.effect is a function which returns unsupported type "${typeof t}"`);this.effectValue=n.copy(),this.updateEffect=()=>this.effectValue=t().copy()}let i=e.cap;if(void 0!==e.reachedCap&&(i=()=>this.effectValue,this.reachedCapFunction=e.reachedCap),void 0!==i){if(void 0===e.reachedCap&&(this.reachedCapFunction=wt(n)?()=>this.effectValue>=this.cap:()=>this.effectValue.gte(this.cap)),wt(i))return this.cap=i,void(this.hasCap=!0);if(Et(i))return this.cap=Decimal.fromDecimal(i),void(this.hasCap=!0);if(_t(i))return this.updateCap=()=>{this.cap=i(),this.hasCap=void 0!==this.cap},void this.updateCap();throw new Error(`EffectDisplay config.cap is a function which returns unsupported type "${typeof t}"`)}}}},beforeCreate(){this.updateEffect=()=>{},this.updateCap=()=>{}},methods:{update(){this.updateEffect(),this.updateCap()}}},Rt=Ut,xt=(0,Re.A)(Rt,Pt,Tt,!1,null,null,null),St=xt.exports,Ot={name:"RankBox",components:{DescriptionDisplay:Mt,EffectDisplay:St},props:{rank:{type:Object,required:!0},isExpanded:{type:Boolean,required:!0},position:{type:Number,required:!0}},data(){return{isAvailable:!1,enrtyVisibilities:[]}},computed:{expandClass(){return["far",this.isExpanded?"fa-minus-square":"fa-plus-square"]},name(){return this.rank.name},unlocks(){return Object.values(this.rank.unlocks)}},methods:{update(){const e=this.rank;this.isAvailable=e.isUnlocked,this.enrtyVisibilities=this.unlocks.map((e=>e.canBeApplied))}}},Bt=Ot,qt=(0,Re.A)(Bt,gt,yt,!1,null,null,null),It=qt.exports,$t={name:"RankRewardsTab",components:{RankBox:It},data(){return{expanded:0}},computed:{ranks(){return RankType.all}},methods:{isExpanded(e){return 0!==(this.expanded&1<<e)},expand(e){this.isExpanded(e)?this.expanded&=~(1<<e):this.expanded|=1<<e}}},Nt=$t,Lt=(0,Re.A)(Nt,mt,ht,!1,null,null,null),Ft=Lt.exports,Gt=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"c-options-title"},[e._v(" Save ")]),t("div",{staticClass:"l-options-row"},[t("PrimaryButton",{staticClass:"c-options-btn",attrs:{onclick:"GameStorage.save()"}},[e._v(" Save Game ")]),t("PrimaryButton",{staticClass:"c-options-btn",attrs:{onclick:"GameStorage.exportToClipboard()"}},[e._v(" Export Save ")]),t("PrimaryButton",{staticClass:"c-options-btn",attrs:{onclick:"GameStorage.importSave(prompt('Input your save.'))"}},[e._v(" Import Save ")])],1)])},Vt=[],Ht={name:"OptionsTab",components:{PrimaryButton:ze}},jt=Ht,Yt=(0,Re.A)(jt,Gt,Vt,!1,null,null,null),zt=Yt.exports,Wt=function(){var e=this,t=e._self._c;return t("MainUpgradesTab",{attrs:{upgrades:e.upgrades,name:"Rage Upgrades","currency-amount":e.currencyAmount,"currency-name":"Rage Power"}})},Xt=[],Kt=function(){var e=this,t=e._self._c;return t("div",{on:{click:function(t){e.selectedID=-1}}},[-1!==e.selectedID?t("div",{staticClass:"l-main-upgrade-header"},[t("DescriptionDisplay",{staticClass:"c-sky",attrs:{config:e.config}}),t("CostDisplay",{attrs:{config:e.config,name:e.currencyName}}),t("EffectDisplay",{staticClass:"c-green",attrs:{config:e.config}})],1):e._e(),t("div",{staticClass:"c-main-upgrade-name"},[e._v(" "+e._s(e.name)+" ")]),t("div",{staticClass:"c-main-upgrade-currency"},[e._v(" You have "+e._s(e.currencyAmount)+" "+e._s(e.currencyName)+". ")]),t("div",{staticClass:"l-main-upgrade-container"},e._l(e.upgrades,(function(r,n){return t("MainUpgradeButton",{key:r.id,attrs:{upgrade:r,index:n},nativeOn:{click:function(t){t.stopPropagation(),e.selectedID=r.id}}})})),1)])},Jt=[],Qt=function(){var e=this,t=e._self._c;return t("Button",{staticClass:"c-main-upgrade-btn",class:e.buttonClass,style:e.buttonStyle,on:{click:e.purchase}})},Zt=[],er={name:"MainUpgradeButton",props:{upgrade:{type:Object,required:!0},index:{type:Number,required:!0}},data(){return{isAffordable:!1,isBought:!1}},computed:{config(){return this.upgrade.config},buttonStyle(){return{"background-image":`url("${this.upgrade.url}")`}},buttonClass(){return this.isBought?"c-main-upgrade-btn--bought":this.isAffordable?"c-main-upgrade-btn--available":""}},methods:{update(){const e=this.upgrade;this.isAffordable=e.isAffordable,this.isBought=e.isBought},purchase(){this.upgrade.purchase()}}},tr=er,rr=(0,Re.A)(tr,Qt,Zt,!1,null,null,null),nr=rr.exports,ir=function(){var e=this,t=e._self._c;return e.isVisible?t("span",[e.br?t("br"):e._e(),e._v(" "+e._s(e.label)+" "+e._s(e.formatCost(e.cost,0))+" "+e._s(e.name)+" ")]):e._e()},sr=[],ar={name:"CostDisplay",props:{config:{type:Object,required:!1,default:void 0},br:{type:Boolean,required:!1},name:{type:String,required:!0},label:{type:String,default:"Cost:",required:!1}},data(){return{isVisible:!1,cost:0}},watch:{config:{immediate:!0,handler(e){this.updateFunction=()=>{};const t=e?.cost;if(this.isVisible=void 0!==t,!this.isVisible)return;if(this.formatCost=e.formatCost??format,wt(t))return void(this.cost=t);if(Et(t))return void(this.cost=t.copy());if(!_t(t))throw new Error(`CostDisplay config.cost has unsupported type "${typeof t}"`);const r=t();if(wt(r))return this.cost=r,void(this.updateFunction=()=>this.cost=t());if(Et(r))return this.cost=r.copy(),void(this.updateFunction=()=>this.cost.copyFrom(t()));throw new Error(`CostDisplay config.cost is a function which returns unsupported type "${typeof r}"`)}}},beforeCreate(){this.updateFunction=()=>{}},methods:{update(){this.updateFunction()}}},or=ar,cr=(0,Re.A)(or,ir,sr,!1,null,null,null),ur=cr.exports,lr={name:"MainUpgradesTab",components:{MainUpgradeButton:nr,DescriptionDisplay:Mt,EffectDisplay:St,CostDisplay:ur},props:{upgrades:{type:Array,required:!0},currencyAmount:{type:String,required:!0},currencyName:{type:String,required:!0},name:{type:String,required:!0}},data(){return{selectedID:-1}},computed:{config(){return this.upgrades[this.selectedID].config}}},dr=lr,pr=(0,Re.A)(dr,Kt,Jt,!1,null,null,null),fr=pr.exports,mr={name:"RageUpgradesTab",components:{MainUpgradesTab:fr},data(){return{currencyAmount:""}},computed:{upgrades(){return RageUpgrade.index}},methods:{update(){this.currencyAmount=format(Currency.ragePowers.value,0)}}},hr=mr,gr=(0,Re.A)(hr,Wt,Xt,!1,null,null,null),yr=gr.exports,vr={RageUpgradesTab:yr},br={MassTab:ft,RankRewardsTab:Ft,OptionsTab:zt,...vr},wr=function(){var e=this,t=e._self._c;return t("div",{staticClass:"o-app-bar"},[t("div",{staticClass:"c-nav-button",on:{click:e.handlerClick}},[t("i",{staticClass:"fas fa-navicon"})])])},kr=[],_r={name:"AppBar",methods:{handlerClick(){this.$emit("toggle-drawer")}}},Er=_r,Cr=(0,Re.A)(Er,wr,kr,!1,null,null,null),Dr=Cr.exports,Ar=function(){var e=this,t=e._self._c;return t("v-touch",{staticClass:"l-drawer",on:{swipeleft:e.closeDrawer}},[t("div",{staticClass:"c-drawer-top"},[t("div",{staticClass:"c-game-icon"}),t("div",[t("b",[e._v("Increment Mass "),t("i",[e._v("Rewritten^2")])])])]),t("div",{staticClass:"c-drawer-tabs"},e._l(e.tabs,(function(r){return t("TabButton",{key:r.id,attrs:{tab:r,"is-expanded":e.isExpanded(r.id)},on:{toggle:e.toggle,"close-drawer":e.closeDrawer}})})),1)])},Mr=[],Pr=function(){var e=this,t=e._self._c;return e.isAvailable?t("div",{staticClass:"c-drawer-tab"},[t("div",{staticClass:"c-drawer-tab-name",on:{click:function(t){return e.toggle(e.tab.id)}}},[e._v(" "+e._s(e.tab.name)+" ")]),e.isExpanded?t("div",{staticClass:"c-drawer-subtab-container"},[e._l(e.tab.subtabs,(function(r,n){return[e.subtabVisibilities[n]?t("div",{key:r.id,staticClass:"c-drawer-subtab-name",on:{click:function(t){return e.showTab(r)}}},[e._v(" "+e._s(r.name)+" ")]):e._e()]}))],2):t("div",{staticClass:"o-split-line o-split-line--tab"})]):e._e()},Tr=[],Ur={name:"TabButton",props:{tab:{type:Object,required:!0},isExpanded:{type:Boolean,required:!0}},data(){return{isAvailable:!1,subtabVisibilities:[]}},methods:{update(){const e=this.tab;this.isAvailable=e.isAvailable&&!e.isHidden,this.isAvailable&&(this.subtabVisibilities=e.subtabs.map((e=>e.isAvailable)))},toggle(e){this.$emit("toggle",e)},showTab(e){e.show(!0),this.$emit("close-drawer")}}},Rr=Ur,xr=(0,Re.A)(Rr,Pr,Tr,!1,null,null,null),Sr=xr.exports,Or={name:"GameDrawer",components:{TabButton:Sr},computed:{tabs(){return Tabs.currentUIFormat},expandBits:{get(){return this.$viewModel.expandBits},set(e){this.$viewModel.expandBits=e}}},methods:{isExpanded(e){return 0!==(this.expandBits&1<<e)},expand(e){this.expandBits|=1<<e},collapse(e){this.expandBits&=~(1<<e)},toggle(e){this.isExpanded(e)?this.collapse(e):this.expand(e)},closeDrawer(){this.$emit("close-drawer")}}},Br=Or,qr=(0,Re.A)(Br,Ar,Mr,!1,null,null,null),Ir=qr.exports,$r=function(){var e=this,t=e._self._c;return t("div",{ref:"modal",staticClass:"c-modal l-modal",style:e.positionStyle},[t(e.modal.component,e._b({tag:"component",on:{close:e.hide}},"component",e.modal.props,!1))],1)},Nr=[],Lr={name:"PopupModal",props:{modal:{type:Object,required:!0}},data(){return{positionStyle:{}}},created(){this.on$(GAME_EVENT.CLOSE_MODAL,this.hide)},mounted(){this.updatePositionStyles()},destroyed(){document.activeElement.blur()},methods:{update(){this.updatePositionStyles()},updatePositionStyles(){if(!this.$refs.modal)return;const e=this.$refs.modal.offsetWidth,t=this.$refs.modal.offsetHeight;this.positionStyle={left:`${Math.round(innerWidth/2-e/2)}px`,top:`${Math.round(innerHeight/2-t/2)}px`,transform:"none"}},hide(){this.modal.isOpen&&(this.modal.hide?this.modal.hide():Modal.hide())}}},Fr=Lr,Gr=(0,Re.A)(Fr,$r,Nr,!1,null,null,null),Vr=Gr.exports,Hr={name:"GameUIComponent",components:{HeaderResources:Ie,AppBar:Dr,GameDrawer:Ir,...br,PopupModal:Vr},data(){return{showDrawer:!1}},computed:{view(){return this.$viewModel},page(){return Tabs.current[this.view.subtab].config.component},currentModal(){return this.view.modal.current},swipeHandlers(){return{swipeleft:()=>this.showDrawer=!1,swiperight:()=>this.showDrawer=!0}}},watch:{showDrawer(){this.hideTooltip()}},methods:{toggleDrawer(){this.showDrawer=!this.showDrawer},hideTooltip(){this.view.resourceTooltipId=-1}}},jr=Hr,Yr=(0,Re.A)(jr,_e,Ee,!1,null,null,null),zr=Yr.exports;const Wr={view:{modal:{queue:[],current:void 0,progressBar:void 0},tab:"main",subtab:"mass",initialized:!1,expandBits:0,resourceTooltipId:-1}};function Xr(e,t,r){const n=e.getter;r[t]=!0,e.getter=e=>(r[t],n.call(e,e))}Vue.mixin({computed:{$viewModel(){return Wr.view}},created(){this.update&&(this.on$(GAME_EVENT.UPDATE,this.update),Jr.initialized&&this.update());const e=Object.create(null),t=this._computedWatchers;if(t){for(const r in t)Xr(t[r],r,e);this.$recompute=t=>e[t]=!e[t],Vue.observable(e)}},destroyed(){EventHub.ui.offAll(this)},methods:{format:format,formatX:formatX,formatPow:formatPow,formatInt:formatInt,formatMass:formatMass,emitClick(){this.$emit("click")},emitInput(e){this.$emit("input",e)},emitClose(){this.$emit("close")},on$(e,t){EventHub.ui.on(e,t,this)}}});const Kr={complain(){this.checkReactivity(player,"player")},checkReactivity(e,t){if(void 0!==e&&null!==e){if(void 0!==e.__ob__)throw new Error(`Boi you fukked up - ${t} became REACTIVE (oh shite)`);for(const r in e){if(!Object.prototype.hasOwnProperty.call(e,r))continue;const n=e[r];"object"===typeof n&&this.checkReactivity(n,`${t}.${r}`)}}}};Vue.use(ke(),{name:"v-touch"});const Jr={events:[],flushPromise:void 0,initialized:!1,dispatch(e,t){const r=this.events.indexOf(e);-1!==r&&this.events.splice(r,1),e!==GAME_EVENT.UPDATE&&this.events.push([e,t]),this.flushPromise||(this.flushPromise=Promise.resolve().then(this.flushEvents.bind(this)))},flushEvents(){this.flushPromise=void 0;for(const e of this.events)EventHub.ui.dispatch(e[0],e[1]);EventHub.ui.dispatch(GAME_EVENT.UPDATE),d&&Kr.complain(),this.events=[]},update(){this.dispatch(GAME_EVENT.UPDATE)}};(function(){const e=Vue.config.optionMergeStrategies.methods;Vue.config.optionMergeStrategies.methods=(t,r,n,i)=>{const s=e(t,r,n,i),a=e=>e&&e.update;return a(t)&&a(r)?(s.update=function(){t.update.call(this),r.update.call(this)},s):s}})();const Qr=new Vue({el:"#ui",components:{GameUIComponent:zr},data:Wr,render:e=>e(zr)});var Zr=function(){var e=this,t=e._self._c;return t("div",{staticClass:"c-modal-message l-modal-content--centered"},[e.modal.closeButton?t("ModalCloseButton",{staticClass:"c-modal__close-btn--tiny",on:{click:e.emitClose}}):e._e(),t("div",{staticClass:"c-modal-message__text",domProps:{innerHTML:e._s(e.message)}}),t("PrimaryButton",{staticClass:"o-primary-btn--width-medium c-modal-message__okay-btn c-modal__confirm-btn",on:{click:e.handleClick}},[e._v(" Okay ")])],1)},en=[],tn=function(){var e=this,t=e._self._c;return t("PrimaryButton",{staticClass:"o-primary-btn--modal-close c-modal__close-btn",on:{click:e.emitClick}},[e._v(" Ã— ")])},rn=[],nn={name:"ModalCloseButton",components:{PrimaryButton:ze}},sn=nn,an=(0,Re.A)(sn,tn,rn,!1,null,null,null),on=an.exports,cn={name:"MessageModal",components:{PrimaryButton:ze,ModalCloseButton:on},data(){return{message:""}},computed:{modal(){return this.$viewModel.modal.current}},created(){this.on$(GAME_EVENT.ENTER_PRESSED,this.handleClick)},methods:{update(){this.message=this.modal?.message},handleClick(){this.modal.callback?.(),this.emitClose(),EventHub.ui.offAll(this)}}},un=cn,ln=(0,Re.A)(un,Zr,en,!1,null,null,null),dn=ln.exports,pn=function(){var e=this,t=e._self._c;return t("ModalWrapperChoice",{attrs:{"show-cancel":!1},scopedSlots:e._u([{key:"confirm-text",fn:function(){return[e._v(" Let's Go! ")]},proxy:!0}])},[t("div",{staticClass:"c-tutorial-title"},[e._v(" Chapter "+e._s(e.tutorial.id)+": "+e._s(e.tutorial.name)+" ")]),t("div",{staticClass:"i-modal-tutorial",style:e.styleObject}),t("div",[e._v(e._s(e.tutorial.info))])])},fn=[],mn=function(){var e=this,t=e._self._c;return t("div",{staticClass:"c-modal-message l-modal-content--centered"},[t("span",{staticClass:"c-modal__header"},[e.showCancel?t("ModalCloseButton",{on:{click:e.closeModal}}):e._e(),e.$slots.header?t("span",{staticClass:"c-modal__title"},[e._t("header")],2):e._e()],1),e._t("default"),e.option?t("ModalConfirmationCheck",{attrs:{option:e.option}}):e._e(),t("div",{staticClass:"l-modal-buttons"},[e.showCancel?t("PrimaryButton",{class:e.cancelClass,on:{click:e.doCancel}},[e._t("cancel-text",(function(){return[e._v(" Cancel ")]}))],2):e._e(),e._t("extra-buttons"),e.showConfirm?t("PrimaryButton",{class:e.confirmClass,on:{click:e.doConfirm}},[e._t("confirm-text",(function(){return[e._v(" Confirm ")]}))],2):e._e()],2)],2)},hn=[],gn=function(){var e=this,t=e._self._c;return t("div",{staticClass:"c-modal__confirmation-toggle",on:{click:e.toggle}},[t("div",{class:e.confirmationClass},[e.setting?e._e():t("span",{staticClass:"fas fa-check"}),t("div",{staticClass:"c-modal__confirmation-toggle__tooltip"},[e._v(" "+e._s(e.tooltipText)+" ")])]),t("span",{staticClass:"c-modal__confirmation-toggle__text"},[e._v(" Don't show this message again ")])])},yn=[],vn={name:"ModalConfirmationCheck",props:{option:{type:String,required:!0}},data(){return{setting:!0}},computed:{confirmation(){return ConfirmationTypes[this.option]},confirmationClass(){return{"c-modal__confirmation-toggle__checkbox":!0,"c-modal__confirmation-toggle__checkbox--active":!this.setting}},tooltipText(){return`${this.setting?"Disable":"Reenable"} the ${this.confirmation.name} confirmation`}},created(){this.setting=this.confirmation.option},methods:{toggle(){this.setting=!this.setting,this.confirmation.option=this.setting}}},bn=vn,wn=(0,Re.A)(bn,gn,yn,!1,null,null,null),kn=wn.exports,_n={name:"ModalWrapperChoice",components:{PrimaryButton:ze,ModalConfirmationCheck:kn,ModalCloseButton:on},props:{cancelClass:{type:String,required:!1,default:"o-primary-btn--width-medium c-modal-message__okay-btn"},confirmClass:{type:String,required:!1,default:"o-primary-btn--width-medium c-modal-message__okay-btn c-modal__confirm-btn"},showCancel:{type:Boolean,required:!1,default:!0},showConfirm:{type:Boolean,required:!1,default:!0},option:{type:String,required:!1,default:void 0},confirmFn:{type:Function,required:!1,default:void 0},cancelFn:{type:Function,required:!1,default:void 0}},created(){this.on$(GAME_EVENT.ENTER_PRESSED,this.doConfirm)},methods:{doConfirm(){this.confirmFn?this.confirmFn():(this.$emit("confirm"),EventHub.dispatch(GAME_EVENT.CLOSE_MODAL))},doCancel(){this.cancelFn?this.cancelFn():(this.$emit("cancel"),EventHub.dispatch(GAME_EVENT.CLOSE_MODAL))},closeModal(){EventHub.dispatch(GAME_EVENT.CLOSE_MODAL)}}},En=_n,Cn=(0,Re.A)(En,mn,hn,!1,null,"42eb4f73",null),Dn=Cn.exports,An={name:"TutorialModal",components:{ModalWrapperChoice:Dn},props:{tutorial:{type:Object,required:!0}},computed:{styleObject(){return{"background-image":`url("../images/quotes/${this.tutorial.id}.png")`}}}},Mn=An,Pn=(0,Re.A)(Mn,pn,fn,!1,null,null,null),Tn=Pn.exports,Un=function(){var e=this,t=e._self._c;return t("ModalWrapperChoice",{attrs:{options:e.options},on:{confirm:e.confirm}},[t("div",{staticClass:"c-tutorial-title"},[e._v(" Are you sure you want to reset? ")])])},Rn=[],xn={name:"TutorialModal",components:{ModalWrapperChoice:Dn},props:{confirmFn:{type:Function,required:!0},options:{type:String,required:!0}},methods:{confirm(){this.confirmFn(),EventHub.ui.offAll(this)}}},Sn=xn,On=(0,Re.A)(Sn,Un,Rn,!1,null,null,null),Bn=On.exports;let qn=0;class In{constructor(e,t=0,r){this._component=e,this._modalConfig={},this._priority=t,this._closeEvent=r}applyCloseListeners(e){const t=[];let r=!1;for(const n of t)n===e&&(r=!0),r&&EventHub.ui.on(n,(()=>this.removeFromQueue()),this._component);r||EventHub.ui.on(e,(()=>this.removeFromQueue()),this._component)}show(e){if(!GameUI.initialized)return;this._uniqueID=qn++,this._props=Object.assign({},e||{}),this._closeEvent&&this.applyCloseListeners(this._closeEvent),e?.closeEvent&&this.applyCloseListeners(e.closeEvent);const t=ui.view.modal.queue;t.unshift(this),In.sortModalQueue()}get isOpen(){return ui.view.modal.current===this}get component(){return this._component}get props(){return this._props}get priority(){return this._priority}removeFromQueue(){EventHub.ui.offAll(this._component),ui.view.modal.queue=ui.view.modal.queue.filter((e=>e._uniqueID!==this._uniqueID)),0===ui.view.modal.queue.length?ui.view.modal.current=void 0:ui.view.modal.current=ui.view.modal.queue[0]}static sortModalQueue(){const e=ui.view.modal.queue;e.sort(((e,t)=>t.priority-e.priority));const t=[...new Set(e)];ui.view.modal.queue=t,ui.view.modal.current=t[0]}static hide(){GameUI.initialized&&(ui.view.modal.queue.shift(),0===ui.view.modal.queue.length?ui.view.modal.current=void 0:ui.view.modal.current=ui.view.modal.queue[0],ui.view.modal.cloudConflict=[])}static hideAll(){if(GameUI.initialized){while(ui.view.modal.queue.length)ui.view.modal.queue[0].hide?ui.view.modal.queue[0].hide():In.hide();ui.view.modal.current=void 0}}static get isOpen(){return ui.view.modal.current instanceof this}}In.tutorial=new In(Tn),In.confirmation=new In(Bn,1),In.message=new class extends In{show(e,t={},r=0){if(GameUI.initialized){if(void 0===this.currPriority)this.currPriority=r;else if(r<this.currPriority)return;super.show(),this.message=e,this.callback=t.callback,this.closeButton=t.closeButton??!1,EventHub.ui.offAll(this._component),t.closeEvent&&this.applyCloseListeners(t.closeEvent)}}hide(){EventHub.ui.offAll(this._component),this.currPriority=void 0,In.hide()}}(dn,2);const $n={patches:{1:e=>{e.mass=f.E1}},prePatch(e){e.version=e.version||0},patch(e,t){this.prePatch(e);const r=L([Player.defaultStart,e]),n=Object.keys(this.patches).map(parseFloat).sort();let i;while(void 0!==(i=n.find((e=>r.version<e&&e<t)))){const e=this.patches[i];e(r),r.version=i}return r},patchPlayer(e){return this.patch(e,Object.keys($n.patches).map(parseFloat).max()+1)}},Nn={saveInterval:2e4,get timeSinceLastSave(){return this._timeSinceLastSave},set timeSinceLastSave(e){this._timeSinceLastSave=e,this._timeSinceLastSave>=this.saveInterval&&this.save()},get saveKey(){return d?"imrr-dev-save":"imrr-save"},init(){const e=localStorage.getItem(this.saveKey);null!==e&&(this.importSave(e),setInterval((()=>this.save()),this.saveInterval))},importFromJSON(e){const t=e;player=$n.patchPlayer(t),this.updatePlayerData()},exportToClipboard(){return copyToClipboard(Serializer.encode(JSON.stringify(player)))},importSave(e){try{this.importFromJSON(JSON.parse(Serializer.decode(e)))}catch(t){Modal.message.show("Invalid save")}},save(){localStorage.setItem(this.saveKey,Serializer.encode(JSON.stringify(player))),this._timeSinceLastSave=0,this.hasSaved=!0},hardReset(){GameLoop.stop(),player=L([{},Player.defaultStart]),this.updatePlayerData(),Currency.mass.reset(),GameLoop.start(),this.save()},updatePlayerData(){Lazy.invalidateAll()}};class Ln{constructor(e){this._config=e}get config(){return this._config}get id(){return this.config.id}get isUnlocked(){return 0!==(player.tutorialBits&1<<this.id)}unlock(){this.isUnlocked||(player.tutorialBits|=1<<this.id,Modal.tutorial.show({tutorial:this.config}))}}const Fn=mapGameDataToObject(GameDatabase.tutorials,(e=>new Ln(e)));class Gn{constructor(e){this.name=e.name,this._confirmationSetting=e.option,this.isUnlocked=e.isUnlocked}get option(){return player.options.confirmations[this._confirmationSetting]}set option(e){player.options.confirmations[this._confirmationSetting]=e}}const Vn=O.confirmationTypes.mapToObject((e=>e.option),(e=>new Gn(e)));Vn.index=Object.values(Vn);class Hn{static rageUnlocked(){return Currency.ragePowers.gt(0)||Hn.blackHoleUnlocked()}static blackHoleUnlocked(){return Currency.darkMatter.gt(0)}}r(6573),r(8100),r(7936),r(7467),r(4732),r(9577),r(4979);var jn=r(665);function Yn(e){const t=window.atob(e).split("").map((e=>e.charCodeAt(0))),r=new Uint8Array(t);return jn.Ay.inflate(r,{to:"string"})}function zn(e){return window.btoa(String.fromCharCode.apply(null,jn.Ay.deflate(e,{gzip:!0})))}const Wn={fileStart:"IncrementalMassRewritten2SaveFileAAA",fileEnd:"EndOfSaveFile",encode(e){return`${this.fileStart}${zn(e).replace(/0/gu,"0a").replace(/(\+)/gu,"0b").replace(/(\/)/gu,"0c")}${this.fileEnd}`},decode(e){return Yn(e.slice(this.fileStart.length,-this.fileEnd.length).replace(/0c/gu,"/").replace(/0b/gu,"+").replace(/0a/gu,"0"))}};class Xn{constructor(e=null){this._id=e}get isUnlocked(){throw new NotImplementedError}get id(){return this._id}get canTick(){return this.isActive&&this.isUnlocked}get isActive(){throw new NotImplementedError}set isActive(e){throw new NotImplementedError}get bulk(){return 1}toggle(){this.isActive=!this.isActive}tick(){throw new NotImplementedError}reset(){}static get entryCount(){return 1}static get autobuyerGroupName(){throw new NotImplementedError}static get isActive(){return!0}static set isActive(e){throw new NotImplementedError}static createAccessor(){const e=this.entryCount,t=Array.range(1,e).map((e=>new this(e))),r=[null,...t],n=e=>r[e];return Object.defineProperties(n,{oneIndexed:{get:()=>r},zeroIndexed:{get:()=>t},entryCount:{get:()=>e},anyUnlocked:{get:()=>t.some((e=>e.isUnlocked))},allUnlocked:{get:()=>t.every((e=>e.isUnlocked))},allActive:{get:()=>t.every((e=>e.isActive))},groupName:{get:()=>this.autobuyerGroupName},isActive:{get:()=>this.isActive,set:e=>{this.isActive=e}}}),n.toggle=()=>this.isActive=!this.isActive,n}}class Kn extends Xn{get _rank(){return RankType.all[this.id-1]}get name(){return this._rank.config.name}get isActive(){return player.auto.ranks[this._rank.id]}set isActive(e){player.auto.ranks[this._rank.id]=e}get canTick(){return void 0!==this._rank&&super.canTick}get isUnlocked(){return this._rank.autoUnlocked}tick(){this._rank.bulk()}static get entryCount(){return 6}static get autobuyerGroupName(){return"Ranks"}}class Jn extends Xn{get _upgrade(){return MassUpgrade.all[this.id-1]}get name(){return this._upgrade.config.name}get isActive(){return player.auto.massUpgrades[this._upgrade.id]}set isActive(e){player.auto.massUpgrades[this._upgrade.id]=e}get canTick(){return void 0!==this._upgrade&&super.canTick}get isUnlocked(){return this._upgrade.autoUnlocked}tick(){this._upgrade.buyMax()}static get entryCount(){return 5}static get autobuyerGroupName(){return"Mass Upgrades"}}const Qn={rank:Kn.createAccessor(),massUpgrade:Jn.createAccessor()},Zn={all:[...Qn.rank.zeroIndexed,...Qn.massUpgrade.zeroIndexed],tick(){for(const e of Zn.all)e.canTick&&e.tick()}};function ei(){GameStorage.init(),GameLoop.start(),Tabs.all.find((e=>e.config.id===player.options.lastOpenTab))?.show(!0)}function ti(e){for(const t in e){if("default"===t)continue;const r=e[t],n=window[t];if(void 0!==n)throw`Property ${t} already exists in global context`;window[t]=r}}window.onload=function(){GameUI.initialized=!0,ui.view.initialized=!0},ti(n),ti(i),ti(s),ti(a),ei()}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var s=t[n]={exports:{}};return e[n].call(s.exports,s,s.exports,r),s.exports}r.m=e,function(){var e=[];r.O=function(t,n,i,s){if(!n){var a=1/0;for(l=0;l<e.length;l++){n=e[l][0],i=e[l][1],s=e[l][2];for(var o=!0,c=0;c<n.length;c++)(!1&s||a>=s)&&Object.keys(r.O).every((function(e){return r.O[e](n[c])}))?n.splice(c--,1):(o=!1,s<a&&(a=s));if(o){e.splice(l--,1);var u=i();void 0!==u&&(t=u)}}return t}s=s||0;for(var l=e.length;l>0&&e[l-1][2]>s;l--)e[l]=e[l-1];e[l]=[n,i,s]}}(),function(){r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,{a:t}),t}}(),function(){r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};r.O.j=function(t){return 0===e[t]};var t=function(t,n){var i,s,a=n[0],o=n[1],c=n[2],u=0;if(a.some((function(t){return 0!==e[t]}))){for(i in o)r.o(o,i)&&(r.m[i]=o[i]);if(c)var l=c(r)}for(t&&t(n);u<a.length;u++)s=a[u],r.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return r.O(l)},n=self["webpackChunkimr_rewritten"]=self["webpackChunkimr_rewritten"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=r.O(void 0,[504],(function(){return r(2632)}));n=r.O(n)})();
//# sourceMappingURL=app.ae5de0b4.js.map